<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAVVA ERP - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ–º</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è SAVVA –±—Ä–µ–Ω–¥–∞ */
        :root {
            --savva-gold: #D4AF37;
            --savva-dark-gold: #B8860B;
        }
        
        .savva-gold { color: var(--savva-gold); }
        .savva-bg-gold { background-color: var(--savva-gold); }
        .savva-gradient { background: linear-gradient(135deg, var(--savva-gold) 0%, var(--savva-dark-gold) 100%); }
        
        .savva-heading {
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .savva-field {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 12px 16px;
            transition: all 0.3s ease;
        }
        
        .savva-field:focus {
            border-color: var(--savva-gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            outline: none;
        }
        
        .savva-button {
            background: var(--savva-gradient);
            color: white;
            border-radius: 12px;
            padding: 12px 24px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .savva-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.2);
        }
        
        .savva-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .savva-animate { animation: fadeInUp 0.6s ease-out; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script type="module">
        const { createElement: h, useState } = React;
        
        // –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ–¥–∞)
        const HOLIDAYS = {
            // –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
            '01-01': '–ù–æ–≤—ã–π –≥–æ–¥',
            '01-02': '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã',
            '01-03': '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã',
            '01-04': '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã',
            '01-05': '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã',
            '01-06': '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã',
            '01-07': '–†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ',
            '01-08': '–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã',
            
            // –î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–∞ –û—Ç–µ—á–µ—Å—Ç–≤–∞
            '02-23': '–î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–∞ –û—Ç–µ—á–µ—Å—Ç–≤–∞',
            
            // –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å
            '03-08': '–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å',
            
            // –î–µ–Ω—å —Ç—Ä—É–¥–∞
            '05-01': '–ü—Ä–∞–∑–¥–Ω–∏–∫ –í–µ—Å–Ω—ã –∏ –¢—Ä—É–¥–∞',
            '05-09': '–î–µ–Ω—å –ü–æ–±–µ–¥—ã',
            
            // –î–µ–Ω—å –†–æ—Å—Å–∏–∏
            '06-12': '–î–µ–Ω—å –†–æ—Å—Å–∏–∏',
            
            // –î–µ–Ω—å –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–∞
            '11-04': '–î–µ–Ω—å –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–∞'
        };
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≥–æ–¥–∞
        const getHolidaysForYear = (year) => {
            const holidays = [];
            Object.keys(HOLIDAYS).forEach(date => {
                holidays.push({
                    date: `${year}-${date}`,
                    name: HOLIDAYS[date]
                });
            });
            return holidays;
        };
        
        // –î–∞–Ω–Ω—ã–µ –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö
        const RESTAURANTS = {
            'savva_moscow': {
                id: 'savva_moscow',
                name: '–°–∞–≤–≤–∞',
                location: '–ú–æ—Å–∫–≤–∞',
                icon: 'üèõÔ∏è',
                description: '–§–ª–∞–≥–º–∞–Ω—Å–∫–∏–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω –≤ —Ü–µ–Ω—Ç—Ä–µ —Å—Ç–æ–ª–∏—Ü—ã',
                color: 'purple'
            },
            'cheese_sochi': {
                id: 'cheese_sochi', 
                name: '–°—ã—Ä–æ–≤–∞—Ä–Ω—è',
                location: '–°–æ—á–∏',
                icon: 'üßÄ',
                description: '–ö—É—Ä–æ—Ä—Ç–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Å –∞–≤—Ç–æ—Ä—Å–∫–æ–π —Å—ã—Ä–Ω–æ–π –∫–∞—Ä—Ç–æ–π',
                color: 'orange'
            },
            'seafood_vladivostok': {
                id: 'seafood_vladivostok',
                name: 'Sea Food',
                location: '–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫', 
                icon: 'üêü',
                description: '–ú–æ—Ä—Å–∫–æ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Å —Å–≤–µ–∂–∏–º–∏ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏',
                color: 'blue'
            }
        };
        
        // –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
        const createInitialDirector = (restaurantId) => ({
            id: `director_${restaurantId}`,
            position: '–î–∏—Ä–µ–∫—Ç–æ—Ä',
            fullName: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ò–≤–∞–Ω–æ–≤–∏—á –ü–µ—Ç—Ä–æ–≤',
            description: '–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–æ–¥—É–ª—è–º –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏',
            permissions: ['all'],
            icon: 'üëë',
            isDirector: true,
            password: '111', // –ü–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            restaurantId: restaurantId
        });
        
        // –°–ø–∏—Å–æ–∫ –§–ò–û –¥–ª—è –≤—ã–±–æ—Ä–∞
        const FIO_LIST = [
            '–ú–∞—Ä–∏—è –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
            '–ò–≤–∞–Ω –°–µ—Ä–≥–µ–µ–≤–∏—á –°–º–∏—Ä–Ω–æ–≤',
            '–ï–ª–µ–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞',
            '–î–º–∏—Ç—Ä–∏–π –ù–∏–∫–æ–ª–∞–µ–≤–∏—á –ü–æ–ø–æ–≤',
            '–û–ª—å–≥–∞ –í–∏–∫—Ç–æ—Ä–æ–≤–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞',
            '–ê–Ω–¥—Ä–µ–π –ú–∏—Ö–∞–π–ª–æ–≤–∏—á –°–æ–∫–æ–ª–æ–≤',
            '–¢–∞—Ç—å—è–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞ –õ–µ–±–µ–¥–µ–≤–∞',
            '–°–µ—Ä–≥–µ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á –ö–æ–∑–ª–æ–≤',
            '–ù–∞—Ç–∞–ª—å—è –ò–≤–∞–Ω–æ–≤–Ω–∞ –ú–æ—Ä–æ–∑–æ–≤–∞',
            '–ê–ª–µ–∫—Å–µ–π –ê–Ω–¥—Ä–µ–µ–≤–∏—á –í–æ–ª–∫–æ–≤',
            '–Æ–ª–∏—è –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞ –§–µ–¥–æ—Ä–æ–≤–∞',
            '–í–ª–∞–¥–∏–º–∏—Ä –ê–ª–µ–∫—Å–µ–µ–≤–∏—á –ó–∞–π—Ü–µ–≤',
            '–ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞ –†–æ–º–∞–Ω–æ–≤–∞',
            '–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω –ò–≥–æ—Ä–µ–≤–∏—á –ë–µ–ª–æ–≤',
            '–°–≤–µ—Ç–ª–∞–Ω–∞ –ù–∏–∫–æ–ª–∞–µ–≤–Ω–∞ –û—Ä–ª–æ–≤–∞'
        ];
        
        // –î–æ–ª–∂–Ω–æ—Å—Ç–∏ –∏ –∏—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
        // –î–æ–ª–∂–Ω–æ—Å—Ç–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
        const POSITIONS = {
            '–î–∏—Ä–µ–∫—Ç–æ—Ä': {
                icon: 'üëë',
                permissions: ['all'],
                description: '–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–æ–¥—É–ª—è–º –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏',
                modules: ['hrm', 'warehouse'],
                isDirector: true
            },
            '–ú–µ–Ω–µ–¥–∂–µ—Ä': {
                icon: 'üëî',
                permissions: ['hrm', 'warehouse', 'reports'],
                description: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª–∞–º–∏, –¥–æ—Å—Ç—É–ø –∫ HRM –∏ —Å–∫–ª–∞–¥—É',
                modules: ['hrm', 'warehouse'],
                isDirector: false
            },
            'HR': {
                icon: 'üë•',
                permissions: ['hrm', 'reports'],
                description: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º, –æ—Ç–ø—É—Å–∫–∞–º–∏ –∏ —Ä–∞—Å—á–µ—Ç–Ω—ã–º–∏ –ª–∏—Å—Ç–∫–∞–º–∏',
                modules: ['hrm'],
                isDirector: false
            },
            '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä': {
                icon: 'üí∞',
                permissions: ['hrm', 'payroll'],
                description: '–†–∞—Å—á–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã, –ø—Ä–µ–º–∏–π, —à—Ç—Ä–∞—Ñ–æ–≤ –∏ –≤–µ–¥–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤',
                modules: ['hrm', 'payroll'],
                isDirector: false,
                canManagePayroll: true
            },
            '–†–∞–±–æ—Ç–Ω–∏–∫ —Å–∫–ª–∞–¥–∞': {
                icon: 'üì¶',
                permissions: ['warehouse'],
                description: '–†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏, –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –∏ –¥–≤–∏–∂–µ–Ω–∏—è–º–∏',
                modules: ['warehouse'],
                isDirector: false
            },
            '–°–æ—Ç—Ä—É–¥–Ω–∏–∫': {
                icon: 'üë§',
                permissions: ['hrm_limited'],
                description: '–î–æ—Å—Ç—É–ø –∫ –ª–∏—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º –∏ –ø–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫',
                modules: [],
                isDirector: false
            }
        };
        
        function App() {
            try {
                console.log('üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ App');
                
                // –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å localStorage (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–µ—Ä–≤—ã–º–∏)
                const saveToLocalStorage = (key, data) => {
                    try {
                        localStorage.setItem(key, JSON.stringify(data));
                    } catch (error) {
                        console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage:', error);
                    }
                };
                
                const loadFromLocalStorage = (key, defaultValue = null) => {
                    try {
                        const data = localStorage.getItem(key);
                        return data ? JSON.parse(data) : defaultValue;
                    } catch (error) {
                        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ localStorage:', error);
                        return defaultValue;
                    }
                };
                
                // –§—É–Ω–∫—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                const migrateEmployeeData = (employeesData) => {
                    try {
                        console.log('üîÑ –ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:', employeesData);
                        const migratedData = {};
                        
                        Object.keys(employeesData).forEach(restaurantId => {
                            console.log(`üîÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω: ${restaurantId}`);
                            const restaurantEmployees = employeesData[restaurantId];
                            
                            if (!Array.isArray(restaurantEmployees)) {
                                console.warn(`‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ ${restaurantId} –Ω–µ —è–≤–ª—è—é—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º:`, restaurantEmployees);
                                migratedData[restaurantId] = [];
                                return;
                            }
                            
                            migratedData[restaurantId] = restaurantEmployees.map((employee, index) => {
                                console.log(`üîÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ ${index}:`, employee);
                                
                                // –ï—Å–ª–∏ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –ø–∞—Ä–æ–ª—è, –¥–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                                if (!employee.password) {
                                    console.log(`üîë –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–æ–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É: ${employee.fullName || '–ë–µ–∑ –∏–º–µ–Ω–∏'}`);
                                    return {
                                        ...employee,
                                        password: '111'
                                    };
                                }
                                console.log(`–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —É–∂–µ –µ—Å—Ç—å –ø–∞—Ä–æ–ª—å: ${employee.fullName || '–ë–µ–∑ –∏–º–µ–Ω–∏'}`);
                                return employee;
                            });
                        });
                        
                        console.log('–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞:', migratedData);
                        return migratedData;
                    } catch (error) {
                        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:', error);
                        console.error('Stack trace:', error.stack);
                        return employeesData; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
                    }
                };
            
            const [selectedRestaurant, setSelectedRestaurant] = useState(null);
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [currentUser, setCurrentUser] = useState(null);
            const [currentModule, setCurrentModule] = useState('hrm');
            const [currentSection, setCurrentSection] = useState('employees');
            const [selectedPosition, setSelectedPosition] = useState(null);
            const [selectedEmployeeFIO, setSelectedEmployeeFIO] = useState('');
            const [loginPassword, setLoginPassword] = useState('');
            const [employees, setEmployees] = useState(() => {
                try {
                    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤...');
                    const savedEmployees = loadFromLocalStorage('novikov_employees', {});
                    console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:', savedEmployees);
                    
                    // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
                    if (!savedEmployees || Object.keys(savedEmployees).length === 0) {
                        console.log('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç');
                        return {};
                    }
                    
                    // –ú–∏–≥—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
                    console.log('–ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö...');
                    const migratedEmployees = migrateEmployeeData(savedEmployees);
                    console.log('–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞:', migratedEmployees);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ localStorage
                    saveToLocalStorage('novikov_employees', migratedEmployees);
                    
                    return migratedEmployees;
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:', error);
                    console.error('Stack trace:', error.stack);
                    return {};
                }
            });
            const [showAddEmployee, setShowAddEmployee] = useState(false);
            const [newEmployee, setNewEmployee] = useState({
                fullName: '',
                position: '–°–æ—Ç—Ä—É–¥–Ω–∏–∫',
                department: '',
                phone: '',
                email: '',
                password: '111' // –ü–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            });
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
            const [selectedEmployee, setSelectedEmployee] = useState(null);
            const [employeeCardTab, setEmployeeCardTab] = useState('personal');
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
            const [employeeDocuments, setEmployeeDocuments] = useState(() => {
                const savedDocuments = loadFromLocalStorage('novikov_documents', {});
                return savedDocuments;
            });
            const [showDocumentUpload, setShowDocumentUpload] = useState(false);
            const [documentUploadData, setDocumentUploadData] = useState({
                employeeId: '',
                documentType: '',
                file: null,
                description: ''
            });
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤
            const [bonusesPenalties, setBonusesPenalties] = useState(() => {
                const savedBonusesPenalties = loadFromLocalStorage('novikov_bonuses_penalties', {});
                return savedBonusesPenalties;
            });
            const [showBonusPenaltyForm, setShowBonusPenaltyForm] = useState(false);
            const [bonusPenaltyData, setBonusPenaltyData] = useState({
                employeeId: '',
                type: '', // 'bonus' –∏–ª–∏ 'penalty'
                amount: '',
                reason: '',
                approvedBy: ''
            });
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤
            const [payrollSlips, setPayrollSlips] = useState(() => {
                const savedPayrollSlips = loadFromLocalStorage('novikov_payroll_slips', {});
                return savedPayrollSlips;
            });
            const [showPayrollForm, setShowPayrollForm] = useState(false);
            const [payrollData, setPayrollData] = useState({
                employeeId: '',
                month: '',
                year: '',
                baseSalary: '',
                bonuses: '',
                penalties: '',
                totalAmount: ''
            });
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç–ø—É—Å–∫–æ–≤
            const [vacations, setVacations] = useState(() => {
                const savedVacations = loadFromLocalStorage('novikov_vacations', {});
                return savedVacations;
            });
            const [showVacationForm, setShowVacationForm] = useState(false);
            const [vacationRequest, setVacationRequest] = useState({
                type: 'annual',
                startDate: '',
                endDate: '',
                comment: '',
                employeeId: ''
            });
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            const [notifications, setNotifications] = useState({});
            const [unreadNotifications, setUnreadNotifications] = useState(0);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–∫–ª–∞–¥–∞ —Å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
            const [warehouseData, setWarehouseData] = useState({});
            const [warehouseFilter, setWarehouseFilter] = useState({
                category: '',
                supplier: '',
                search: '',
                minQuantity: '',
                maxQuantity: '',
                expiryDate: '',
                lowStock: false
            });
            const [warehousePage, setWarehousePage] = useState(1);
            const [warehousePageSize, setWarehousePageSize] = useState(50);
            const [showAddProduct, setShowAddProduct] = useState(false);
            const [newProduct, setNewProduct] = useState({
                name: '',
                category: '',
                supplier: '',
                quantity: '',
                unit: '',
                price: '',
                expiryDate: '',
                sku: '',
                minStock: '',
                maxStock: ''
            });
            const [replenishmentRequests, setReplenishmentRequests] = useState({});
            const [showReplenishmentForm, setShowReplenishmentForm] = useState(false);
            const [replenishmentData, setReplenishmentData] = useState({
                productId: '',
                requestedQuantity: '',
                priority: 'normal',
                reason: '',
                supplier: ''
            });
            const [supplyTracking, setSupplyTracking] = useState({});
            const [warehouseReports, setWarehouseReports] = useState({});
            const [selectedProducts, setSelectedProducts] = useState([]);
            const [showBulkActions, setShowBulkActions] = useState(false);
            const [warehouseTab, setWarehouseTab] = useState('products');
            const [showIssuanceForm, setShowIssuanceForm] = useState(false);
            const [issuanceData, setIssuanceData] = useState({
                productId: '',
                quantity: '',
                issuedTo: '',
                purpose: '',
                returnDate: ''
            });
            const [showRentalForm, setShowRentalForm] = useState(false);
            const [rentalData, setRentalData] = useState({
                productId: '',
                quantity: '',
                rentedTo: '',
                eventName: '',
                departureDate: '',
                returnDate: '',
                location: ''
            });
            const [showWriteOffForm, setShowWriteOffForm] = useState(false);
            const [writeOffData, setWriteOffData] = useState({
                productId: '',
                quantity: '',
                reason: '',
                comment: ''
            });
            const [issuances, setIssuances] = useState({});
            const [rentals, setRentals] = useState({});
            const [writeOffs, setWriteOffs] = useState({});
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            const [calendarEvents, setCalendarEvents] = useState({});
            const [calendarView, setCalendarView] = useState('month');
            const [showEventForm, setShowEventForm] = useState(false);
            const [selectedEvent, setSelectedEvent] = useState(null);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
            const [personalData, setPersonalData] = useState({});
            const [documents, setDocuments] = useState({});
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            const [showEditProfile, setShowEditProfile] = useState(false);
            const [showChangePassword, setShowChangePassword] = useState(false);
            const [editProfileData, setEditProfileData] = useState({
                fullName: '',
                department: '',
                phone: '',
                email: '',
                password: ''
            });
            const [passwordChangeData, setPasswordChangeData] = useState({
                currentPassword: '',
                newPassword: '',
                confirmPassword: ''
            });
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
            React.useEffect(() => {
                saveToLocalStorage('novikov_employees', employees);
            }, [employees]);
            
            React.useEffect(() => {
                saveToLocalStorage('novikov_vacations', vacations);
            }, [vacations]);
            
            React.useEffect(() => {
                saveToLocalStorage('novikov_documents', employeeDocuments);
            }, [employeeDocuments]);
            
            React.useEffect(() => {
                saveToLocalStorage('novikov_bonuses_penalties', bonusesPenalties);
            }, [bonusesPenalties]);
            
            React.useEffect(() => {
                saveToLocalStorage('novikov_payroll_slips', payrollSlips);
            }, [payrollSlips]);
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
            const updateAllPasswords = () => {
                const updatedEmployees = {};
                
                Object.keys(employees).forEach(restaurantId => {
                    updatedEmployees[restaurantId] = employees[restaurantId].map(employee => ({
                        ...employee,
                        password: employee.password || '111'
                    }));
                });
                
                setEmployees(updatedEmployees);
                saveToLocalStorage('novikov_employees', updatedEmployees);
                alert('–ü–∞—Ä–æ–ª–∏ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã! –¢–µ–ø–µ—Ä—å –≤—Å–µ –ø–∞—Ä–æ–ª–∏: 111');
            };
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
            const clearAllData = () => {
                if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã?\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ –æ—Ç–ø—É—Å–∫–∞ –∏–∑ –≤—Å–µ—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                    localStorage.removeItem('novikov_employees');
                    localStorage.removeItem('novikov_vacations');
                    setEmployees({});
                    setVacations({});
                    alert('–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã! –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞.');
                    window.location.reload();
                }
            };
            
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const initializeRestaurantData = (restaurantId) => {
                if (!employees[restaurantId] || employees[restaurantId].length === 0) {
                    setEmployees(prev => ({
                        ...prev,
                        [restaurantId]: [createInitialDirector(restaurantId)]
                    }));
                }
            };
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const getCurrentRestaurantEmployees = () => {
                return employees[selectedRestaurant] || [];
            };
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const getCurrentRestaurantVacations = () => {
                return vacations[selectedRestaurant] || [];
            };
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const getCurrentRestaurantDocuments = () => {
                return employeeDocuments[selectedRestaurant] || [];
            };
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
            const getEmployeeDocuments = (employeeId) => {
                return getCurrentRestaurantDocuments().filter(doc => doc.employeeId === employeeId);
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–∞—Ç–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º
            const isHoliday = (date) => {
                const year = new Date(date).getFullYear();
                const holidays = getHolidaysForYear(year);
                return holidays.some(holiday => holiday.date === date);
            };
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–Ω–µ–π –æ—Ç–ø—É—Å–∫–∞ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
            const getAvailableVacationDays = (employeeId) => {
                // –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ - –∫–∞–∂–¥—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –∏–º–µ–µ—Ç 28 –¥–Ω–µ–π –≤ –≥–æ–¥—É
                const totalDays = 28;
                const usedDays = getCurrentRestaurantVacations()
                    .filter(vac => vac.employeeId === employeeId && 
                                   vac.type === 'annual' && 
                                   vac.status === 'approved')
                    .reduce((sum, vac) => {
                        const start = new Date(vac.startDate);
                        const end = new Date(vac.endDate);
                        const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;
                        return sum + days;
                    }, 0);
                return totalDays - usedDays;
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å –¥—Ä—É–≥–∏–º–∏ –æ—Ç–ø—É—Å–∫–∞–º–∏
            const checkVacationOverlap = (startDate, endDate, employeeId) => {
                const start = new Date(startDate);
                const end = new Date(endDate);
                
                return getCurrentRestaurantVacations()
                    .filter(vac => vac.employeeId !== employeeId && vac.status === 'approved')
                    .some(vac => {
                        const vacStart = new Date(vac.startDate);
                        const vacEnd = new Date(vac.endDate);
                        return (start <= vacEnd && end >= vacStart);
                    });
            };
            
            // –ü–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫
            const handleVacationSubmit = () => {
                if (!vacationRequest.startDate || !vacationRequest.endDate) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã –æ—Ç–ø—É—Å–∫–∞');
                    return;
                }
                
                const startDate = new Date(vacationRequest.startDate);
                const endDate = new Date(vacationRequest.endDate);
                
                if (startDate > endDate) {
                    alert('–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–∑–∂–µ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è');
                    return;
                }
                
                if (startDate < new Date()) {
                    alert('–ù–µ–ª—å–∑—è –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ç–ø—É—Å–∫ –≤ –ø—Ä–æ—à–ª–æ–º');
                    return;
                }
                
                const holidaysInRange = [];
                const currentDate = new Date(startDate);
                while (currentDate <= endDate) {
                    const dateStr = currentDate.toISOString().split('T')[0];
                    if (isHoliday(dateStr)) {
                        holidaysInRange.push(dateStr);
                    }
                    currentDate.setDate(currentDate.getDate() + 1);
                }
                
                if (holidaysInRange.length > 0) {
                    const holidayNames = holidaysInRange.map(date => {
                        const year = new Date(date).getFullYear();
                        const holidays = getHolidaysForYear(year);
                        const holiday = holidays.find(h => h.date === date);
                        return holiday ? holiday.name : '–ü—Ä–∞–∑–¥–Ω–∏–∫';
                    }).join(', ');
                    
                    if (!confirm(`‚ö†Ô∏è –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫–∏: ${holidayNames}\n\n–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–¥–∞—á—É –∑–∞—è–≤–∫–∏?`)) {
                        return;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–Ω–µ–π –¥–ª—è –µ–∂–µ–≥–æ–¥–Ω–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞
                if (vacationRequest.type === 'annual') {
                    const availableDays = getAvailableVacationDays(currentUser.id);
                    const requestedDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
                    
                    if (requestedDays > availableDays) {
                        alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–Ω–µ–π –æ—Ç–ø—É—Å–∫–∞. –î–æ—Å—Ç—É–ø–Ω–æ: ${availableDays}, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è: ${requestedDays}');
                        return;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å –∫–æ–ª–ª–µ–≥–∞–º–∏
                if (checkVacationOverlap(vacationRequest.startDate, vacationRequest.endDate, currentUser.id)) {
                    if (!confirm('‚ö†Ô∏è –í—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å –æ—Ç–ø—É—Å–∫–∞–º–∏ –∫–æ–ª–ª–µ–≥. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–¥–∞—á—É –∑–∞—è–≤–∫–∏?')) {
                        return;
                    }
                }
                
                const vacation = {
                    id: 'vac_' + Date.now(),
                    employeeId: currentUser.id,
                    employeeName: currentUser.fullName,
                    type: vacationRequest.type,
                    startDate: vacationRequest.startDate,
                    endDate: vacationRequest.endDate,
                    comment: vacationRequest.comment || '',
                    status: 'pending',
                    restaurantId: selectedRestaurant,
                    createdAt: new Date().toISOString()
                };
                
                setVacations(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...getCurrentRestaurantVacations(), vacation]
                }));
                
                setVacationRequest({
                    type: 'annual',
                    startDate: '',
                    endDate: '',
                    comment: '',
                    employeeId: ''
                });
                setShowVacationForm(false);
                
                alert('–ó–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫ –ø–æ–¥–∞–Ω–∞! –û–∂–∏–¥–∞–π—Ç–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è.');
            };
            
            // –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞
            const handleVacationApprove = (vacationId) => {
                if (!canManageEmployees) {
                    alert('–¢–æ–ª—å–∫–æ –î–∏—Ä–µ–∫—Ç–æ—Ä, –ú–µ–Ω–µ–¥–∂–µ—Ä –∏–ª–∏ HR –º–æ–≥—É—Ç —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—Ç—å –æ—Ç–ø—É—Å–∫–∞!');
                    return;
                }
                setVacations(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantVacations().map(vac => 
                        vac.id === vacationId ? { ...vac, status: 'approved', approvedBy: currentUser.fullName } : vac
                    )
                }));
                alert('–û—Ç–ø—É—Å–∫ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω!');
            };
            
            // –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞
            const handleVacationReject = (vacationId) => {
                if (!canManageEmployees) {
                    alert('–¢–æ–ª—å–∫–æ –î–∏—Ä–µ–∫—Ç–æ—Ä, –ú–µ–Ω–µ–¥–∂–µ—Ä –∏–ª–∏ HR –º–æ–≥—É—Ç –æ—Ç–∫–ª–æ–Ω—è—Ç—å –æ—Ç–ø—É—Å–∫–∞!');
                    return;
                }
                setVacations(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantVacations().map(vac => 
                        vac.id === vacationId ? { ...vac, status: 'rejected', rejectedBy: currentUser.fullName } : vac
                    )
                }));
                alert('–û—Ç–ø—É—Å–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω!');
            };
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
            const handleDocumentUpload = () => {
                if (!documentUploadData.employeeId || !documentUploadData.documentType || !documentUploadData.file) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª');
                    return;
                }
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
                const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];
                if (!allowedTypes.includes(documentUploadData.file.type)) {
                    alert('–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã: JPG, PNG, PDF');
                    return;
                }
                
                if (documentUploadData.file.size > 5 * 1024 * 1024) {
                    alert('–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5MB');
                    return;
                }
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                const document = {
                    id: `doc_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    employeeId: documentUploadData.employeeId,
                    type: documentUploadData.documentType,
                    fileName: documentUploadData.file.name,
                    fileSize: documentUploadData.file.size,
                    fileType: documentUploadData.file.type,
                    description: documentUploadData.description || '',
                    uploadDate: new Date().toISOString(),
                    uploadedBy: currentUser.id
                };
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                setEmployeeDocuments(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...getCurrentRestaurantDocuments(), document]
                }));
                
                // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
                setDocumentUploadData({
                    employeeId: '',
                    documentType: '',
                    file: null,
                    description: ''
                });
                setShowDocumentUpload(false);
                
                alert('–î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!');
            };
            
            const handleDeleteDocument = (documentId) => {
                if (!canManageEmployees) {
                    alert('–¢–æ–ª—å–∫–æ –î–∏—Ä–µ–∫—Ç–æ—Ä, –ú–µ–Ω–µ–¥–∂–µ—Ä –∏–ª–∏ HR –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã!');
                    return;
                }
                
                if (confirm('üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç? –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                    setEmployeeDocuments(prev => ({
                        ...prev,
                        [selectedRestaurant]: getCurrentRestaurantDocuments().filter(doc => doc.id !== documentId)
                    }));
                    alert('–î–æ–∫—É–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω!');
                }
            };
            
            const handleFileChange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    setDocumentUploadData({...documentUploadData, file: file});
                }
            };
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–µ–º–∏—è–º–∏ –∏ —à—Ç—Ä–∞—Ñ–∞–º–∏
            const getCurrentRestaurantBonusesPenalties = () => {
                return bonusesPenalties[selectedRestaurant] || [];
            };
            
            const handleBonusPenaltySubmit = () => {
                if (!bonusPenaltyData.employeeId || !bonusPenaltyData.type || !bonusPenaltyData.amount || !bonusPenaltyData.reason) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                    return;
                }
                
                const bonusPenalty = {
                    id: `bp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    employeeId: bonusPenaltyData.employeeId,
                    type: bonusPenaltyData.type,
                    amount: parseFloat(bonusPenaltyData.amount),
                    reason: bonusPenaltyData.reason,
                    approvedBy: currentUser.id,
                    approvedByName: currentUser.fullName,
                    date: new Date().toISOString(),
                    status: 'pending' // pending, approved, rejected
                };
                
                setBonusesPenalties(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...getCurrentRestaurantBonusesPenalties(), bonusPenalty]
                }));
                
                setBonusPenaltyData({
                    employeeId: '',
                    type: '',
                    amount: '',
                    reason: '',
                    approvedBy: ''
                });
                setShowBonusPenaltyForm(false);
                
                alert(`${bonusPenaltyData.type === 'bonus' ? '–ü—Ä–µ–º–∏—è' : '–®—Ç—Ä–∞—Ñ'} –¥–æ–±–∞–≤–ª–µ–Ω!`);
            };
            
            const handleApproveBonusPenalty = (bonusPenaltyId) => {
                if (!canManagePayroll) {
                    alert('–¢–æ–ª—å–∫–æ –±—É—Ö–≥–∞–ª—Ç–µ—Ä –º–æ–∂–µ—Ç –æ–¥–æ–±—Ä—è—Ç—å –ø—Ä–µ–º–∏–∏ –∏ —à—Ç—Ä–∞—Ñ—ã!');
                    return;
                }
                
                setBonusesPenalties(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantBonusesPenalties().map(bp => 
                        bp.id === bonusPenaltyId ? {...bp, status: 'approved'} : bp
                    )
                }));
                
                alert('–ü—Ä–µ–º–∏—è/—à—Ç—Ä–∞—Ñ –æ–¥–æ–±—Ä–µ–Ω!');
            };
            
            const handleRejectBonusPenalty = (bonusPenaltyId) => {
                if (!canManagePayroll) {
                    alert('–¢–æ–ª—å–∫–æ –±—É—Ö–≥–∞–ª—Ç–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–∫–ª–æ–Ω—è—Ç—å –ø—Ä–µ–º–∏–∏ –∏ —à—Ç—Ä–∞—Ñ—ã!');
                    return;
                }
                
                setBonusesPenalties(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantBonusesPenalties().map(bp => 
                        bp.id === bonusPenaltyId ? {...bp, status: 'rejected'} : bp
                    )
                }));
                
                alert('–ü—Ä–µ–º–∏—è/—à—Ç—Ä–∞—Ñ –æ—Ç–∫–ª–æ–Ω–µ–Ω!');
            };
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å—á–µ—Ç–Ω—ã–º–∏ –ª–∏—Å—Ç–∞–º–∏
            const getCurrentRestaurantPayrollSlips = () => {
                return payrollSlips[selectedRestaurant] || [];
            };
            
            const handlePayrollSubmit = () => {
                console.log('–û—Ç–ª–∞–¥–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ –ª–∏—Å—Ç–∞:', {
                    employeeId: payrollData.employeeId,
                    month: payrollData.month,
                    year: payrollData.year,
                    baseSalary: payrollData.baseSalary,
                    currentUser: currentUser
                });
                
                if (!payrollData.employeeId || !payrollData.month || !payrollData.year || !payrollData.baseSalary) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –ø—Ä–µ–º–∏–∏ –∏ —à—Ç—Ä–∞—Ñ—ã –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
                const employeeBonusesPenalties = getCurrentRestaurantBonusesPenalties().filter(bp => 
                    bp.employeeId === payrollData.employeeId && 
                    bp.status === 'approved' &&
                    new Date(bp.date).getMonth() + 1 === parseInt(payrollData.month) &&
                    new Date(bp.date).getFullYear() === parseInt(payrollData.year)
                );
                
                console.log('–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–µ–º–∏–∏/—à—Ç—Ä–∞—Ñ—ã:', employeeBonusesPenalties);
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â—É—é —Å—É–º–º—É –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤
                const totalBonuses = employeeBonusesPenalties
                    .filter(bp => bp.type === 'bonus')
                    .reduce((sum, bp) => sum + bp.amount, 0);
                
                const totalPenalties = employeeBonusesPenalties
                    .filter(bp => bp.type === 'penalty')
                    .reduce((sum, bp) => sum + bp.amount, 0);
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É
                const baseSalary = parseFloat(payrollData.baseSalary);
                const additionalBonuses = parseFloat(payrollData.bonuses) || 0;
                const additionalPenalties = parseFloat(payrollData.penalties) || 0;
                
                const totalAmount = baseSalary + totalBonuses + additionalBonuses - totalPenalties - additionalPenalties;
                
                console.log('–†–∞—Å—á–µ—Ç:', {
                    baseSalary,
                    totalBonuses,
                    totalPenalties,
                    additionalBonuses,
                    additionalPenalties,
                    totalAmount
                });
                
                const payrollSlip = {
                    id: `ps_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    employeeId: payrollData.employeeId,
                    month: payrollData.month,
                    year: payrollData.year,
                    baseSalary: baseSalary,
                    bonuses: totalBonuses + additionalBonuses,
                    penalties: totalPenalties + additionalPenalties,
                    totalAmount: totalAmount,
                    bonusesDetails: employeeBonusesPenalties.filter(bp => bp.type === 'bonus'),
                    penaltiesDetails: employeeBonusesPenalties.filter(bp => bp.type === 'penalty'),
                    createdBy: currentUser.id,
                    createdByName: currentUser.fullName,
                    createdAt: new Date().toISOString(),
                    status: 'created'
                };
                
                console.log('–°–æ–∑–¥–∞–≤–∞–µ–º—ã–π —Ä–∞—Å—á–µ—Ç–Ω—ã–π –ª–∏—Å—Ç:', payrollSlip);
                
                setPayrollSlips(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...getCurrentRestaurantPayrollSlips(), payrollSlip]
                }));
                
                setPayrollData({
                    employeeId: '',
                    month: '',
                    year: '',
                    baseSalary: '',
                    bonuses: '',
                    penalties: '',
                    totalAmount: ''
                });
                setShowPayrollForm(false);
                
            };
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥—É–ª—è —Å–∫–ª–∞–¥–∞
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–∫–ª–∞–¥–∞ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const initializeWarehouseData = (restaurantId) => {
                if (!warehouseData[restaurantId]) {
                    const sampleProducts = generateSampleWarehouseData();
                    setWarehouseData(prev => ({
                        ...prev,
                        [restaurantId]: sampleProducts
                    }));
                }
            };
            
            const generateSampleWarehouseData = () => {
                const productCategories = {
                    'products': ['–ú—è—Å–æ', '–†—ã–±–∞', '–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã', '–û–≤–æ—â–∏', '–§—Ä—É–∫—Ç—ã', '–ö—Ä—É–ø—ã', '–°–ø–µ—Ü–∏–∏', '–ö–æ–Ω—Å–µ—Ä–≤—ã'],
                    'inventory': ['–ú–µ–±–µ–ª—å', '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ', '–î–µ–∫–æ—Ä', '–¢–µ–∫—Å—Ç–∏–ª—å', '–û—Å–≤–µ—â–µ–Ω–∏–µ'],
                    'tableware': ['–¢–∞—Ä–µ–ª–∫–∏', '–°—Ç–∞–∫–∞–Ω—ã', '–ë–æ–∫–∞–ª—ã', '–°—Ç–æ–ª–æ–≤—ã–µ –ø—Ä–∏–±–æ—Ä—ã', '–ß–∞—à–∫–∏', '–ë–ª—é–¥–∞'],
                    'alcohol': ['–í–∏–Ω–æ', '–®–∞–º–ø–∞–Ω—Å–∫–æ–µ', '–ö—Ä–µ–ø–∫–∏–π –∞–ª–∫–æ–≥–æ–ª—å', '–ü–∏–≤–æ', '–ö–æ–∫—Ç–µ–π–ª–∏']
                };
                
                const suppliers = ['–û–û–û "–ú—è—Å–Ω–æ–π –¥–≤–æ—Ä"', '–ò–ü –ò–≤–∞–Ω–æ–≤', '–ó–ê–û "–†—ã–±–Ω—ã–π –º–∏—Ä"', '–û–û–û "–ú–æ–ª–æ–∫–æ+"', '–ò–ü –ü–µ—Ç—Ä–æ–≤', '–û–û–û "–û–≤–æ—â–∏-–§—Ä—É–∫—Ç—ã"', '–ó–ê–û "–ö—Ä—É–ø—ã"', '–ò–ü –°–∏–¥–æ—Ä–æ–≤', '–û–û–û "–ü–æ—Å—É–¥–∞+"', '–ó–ê–û "–ú–µ–±–µ–ª—å"'];
                const units = {
                    'products': ['–∫–≥', '–≥', '–ª', '—É–ø–∞–∫'],
                    'inventory': ['—à—Ç'],
                    'tableware': ['—à—Ç', '–Ω–∞–±–æ—Ä'],
                    'alcohol': ['–ª', '–±—É—Ç—ã–ª–∫–∞', '—É–ø–∞–∫']
                };
                
                const products = [];
                let productCounter = 1;
                
                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                Object.keys(productCategories).forEach(type => {
                    const categoriesForType = productCategories[type];
                    const numItems = type === 'products' ? 15000 : type === 'alcohol' ? 3000 : 1000;
                    
                    for (let i = 0; i < numItems; i++) {
                        const category = categoriesForType[Math.floor(Math.random() * categoriesForType.length)];
                        const supplier = suppliers[Math.floor(Math.random() * suppliers.length)];
                        const unitOptions = units[type];
                        const unit = unitOptions[Math.floor(Math.random() * unitOptions.length)];
                        
                        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –∞–ª–∫–æ–≥–æ–ª—è)
                        let expiryDate = null;
                        if (type === 'products' || type === 'alcohol') {
                            const daysUntilExpiry = Math.floor(Math.random() * 365) + 1;
                            expiryDate = new Date(Date.now() + daysUntilExpiry * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
                        }
                        
                        products.push({
                            id: `${type}_${productCounter}`,
                            sku: `${type.toUpperCase().substr(0, 3)}${String(productCounter).padStart(6, '0')}`,
                            name: `${category} ‚Ññ${productCounter}`,
                            category: category,
                            type: type, // products, inventory, tableware, alcohol
                            supplier: supplier,
                            quantity: Math.floor(Math.random() * 1000),
                            unit: unit,
                            price: (Math.random() * 1000 + 10).toFixed(2),
                            minStock: Math.floor(Math.random() * 50 + 10),
                            maxStock: Math.floor(Math.random() * 500 + 100),
                            expiryDate: expiryDate,
                            location: `–°—Ç–µ–ª–ª–∞–∂ ${Math.floor(Math.random() * 20 + 1)}-${Math.floor(Math.random() * 10 + 1)}`,
                            lastUpdated: new Date().toISOString(),
                            status: Math.random() > 0.1 ? 'active' : 'low_stock',
                            isRented: false,
                            isIssued: false
                        });
                        
                        productCounter++;
                    }
                });
                
                return products;
            };
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–∫–ª–∞–¥–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const getCurrentRestaurantWarehouseData = () => {
                initializeWarehouseData(selectedRestaurant);
                return warehouseData[selectedRestaurant] || [];
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫–ª–∞–¥—É
            const canManageWarehouse = () => {
                return currentUser && (
                    currentUser.position === '–î–∏—Ä–µ–∫—Ç–æ—Ä' || 
                    currentUser.position === '–ú–µ–Ω–µ–¥–∂–µ—Ä' || 
                    currentUser.position === '–°–∫–ª–∞–¥—Å–∫–æ–π —Ä–∞–±–æ—Ç–Ω–∏–∫'
                );
            };
            
            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
            const getFilteredWarehouseData = () => {
                let filtered = getCurrentRestaurantWarehouseData();
                
                // –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (–≤–∫–ª–∞–¥–∫–µ)
                if (warehouseTab !== 'all') {
                    filtered = filtered.filter(product => product.type === warehouseTab);
                }
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
                if (warehouseFilter.search) {
                    const searchLower = warehouseFilter.search.toLowerCase();
                    filtered = filtered.filter(product => 
                        product.name.toLowerCase().includes(searchLower) ||
                        product.sku.toLowerCase().includes(searchLower) ||
                        product.supplier.toLowerCase().includes(searchLower)
                    );
                }
                
                if (warehouseFilter.category) {
                    filtered = filtered.filter(product => product.category === warehouseFilter.category);
                }
                
                if (warehouseFilter.supplier) {
                    filtered = filtered.filter(product => product.supplier === warehouseFilter.supplier);
                }
                
                if (warehouseFilter.minQuantity) {
                    filtered = filtered.filter(product => product.quantity >= parseInt(warehouseFilter.minQuantity));
                }
                
                if (warehouseFilter.maxQuantity) {
                    filtered = filtered.filter(product => product.quantity <= parseInt(warehouseFilter.maxQuantity));
                }
                
                if (warehouseFilter.lowStock) {
                    filtered = filtered.filter(product => product.quantity <= product.minStock);
                }
                
                if (warehouseFilter.expiryDate) {
                    const filterDate = new Date(warehouseFilter.expiryDate);
                    filtered = filtered.filter(product => {
                        if (!product.expiryDate) return false;
                        return new Date(product.expiryDate) <= filterDate;
                    });
                }
                
                return filtered;
            };
            
            const checkExpiringProducts = () => {
                const today = new Date();
                const warningDays = 30; // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –∑–∞ 30 –¥–Ω–µ–π
                const warningDate = new Date(today.getTime() + warningDays * 24 * 60 * 60 * 1000);
                
                return getCurrentRestaurantWarehouseData().filter(product => {
                    if (!product.expiryDate) return false;
                    const expiryDate = new Date(product.expiryDate);
                    return expiryDate <= warningDate && expiryDate >= today;
                });
            };
            
            // –í—ã–¥–∞—á–∞ —Ç–æ–≤–∞—Ä–∞
            const handleIssuanceSubmit = () => {
                if (!issuanceData.productId || !issuanceData.quantity || !issuanceData.issuedTo) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                    return;
                }
                
                const product = getCurrentRestaurantWarehouseData().find(p => p.id === issuanceData.productId);
                if (!product) {
                    alert('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }
                
                if (parseInt(issuanceData.quantity) > product.quantity) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –æ –≤—ã–¥–∞—á–µ
                const issuance = {
                    id: `iss_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    productId: issuanceData.productId,
                    productName: product.name,
                    productSku: product.sku,
                    quantity: parseInt(issuanceData.quantity),
                    issuedTo: issuanceData.issuedTo,
                    purpose: issuanceData.purpose,
                    returnDate: issuanceData.returnDate || null,
                    issuedBy: currentUser.id,
                    issuedByName: currentUser.fullName,
                    createdAt: new Date().toISOString(),
                    status: 'issued',
                    returned: false
                };
                
                setIssuances(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...(prev[selectedRestaurant] || []), issuance]
                }));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
                setWarehouseData(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantWarehouseData().map(p => 
                        p.id === issuanceData.productId 
                            ? { ...p, quantity: p.quantity - parseInt(issuanceData.quantity), isIssued: true }
                            : p
                    )
                }));
                
                setIssuanceData({
                    productId: '',
                    quantity: '',
                    issuedTo: '',
                    purpose: '',
                    returnDate: ''
                });
                setShowIssuanceForm(false);
                
                alert('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –≤—ã–¥–∞–Ω!');
            };
            
            // –ê—Ä–µ–Ω–¥–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –ø–æ–¥ –≤—ã–µ–∑–¥
            const handleRentalSubmit = () => {
                if (!rentalData.productId || !rentalData.quantity || !rentalData.rentedTo || !rentalData.departureDate || !rentalData.returnDate) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                    return;
                }
                
                const product = getCurrentRestaurantWarehouseData().find(p => p.id === rentalData.productId);
                if (!product) {
                    alert('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }
                
                if (parseInt(rentalData.quantity) > product.quantity) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –æ–± –∞—Ä–µ–Ω–¥–µ
                const rental = {
                    id: `rent_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    productId: rentalData.productId,
                    productName: product.name,
                    productSku: product.sku,
                    quantity: parseInt(rentalData.quantity),
                    rentedTo: rentalData.rentedTo,
                    eventName: rentalData.eventName,
                    departureDate: rentalData.departureDate,
                    returnDate: rentalData.returnDate,
                    location: rentalData.location,
                    rentedBy: currentUser.id,
                    rentedByName: currentUser.fullName,
                    createdAt: new Date().toISOString(),
                    status: 'active',
                    returned: false
                };
                
                setRentals(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...(prev[selectedRestaurant] || []), rental]
                }));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
                setWarehouseData(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantWarehouseData().map(p => 
                        p.id === rentalData.productId 
                            ? { ...p, quantity: p.quantity - parseInt(rentalData.quantity), isRented: true }
                            : p
                    )
                }));
                
                setRentalData({
                    productId: '',
                    quantity: '',
                    rentedTo: '',
                    eventName: '',
                    departureDate: '',
                    returnDate: '',
                    location: ''
                });
                setShowRentalForm(false);
                
                alert('–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –≤–∑—è—Ç –≤ –∞—Ä–µ–Ω–¥—É!');
            };
            
            // –°–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            const handleWriteOffSubmit = () => {
                if (!writeOffData.productId || !writeOffData.quantity || !writeOffData.reason) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                    return;
                }
                
                const product = getCurrentRestaurantWarehouseData().find(p => p.id === writeOffData.productId);
                if (!product) {
                    alert('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }
                
                if (parseInt(writeOffData.quantity) > product.quantity) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –æ —Å–ø–∏—Å–∞–Ω–∏–∏
                const writeOff = {
                    id: `wo_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    productId: writeOffData.productId,
                    productName: product.name,
                    productSku: product.sku,
                    quantity: parseInt(writeOffData.quantity),
                    reason: writeOffData.reason,
                    comment: writeOffData.comment,
                    writtenOffBy: currentUser.id,
                    writtenOffByName: currentUser.fullName,
                    createdAt: new Date().toISOString()
                };
                
                setWriteOffs(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...(prev[selectedRestaurant] || []), writeOff]
                }));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
                setWarehouseData(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantWarehouseData().map(p => 
                        p.id === writeOffData.productId 
                            ? { ...p, quantity: p.quantity - parseInt(writeOffData.quantity) }
                            : p
                    )
                }));
                
                setWriteOffData({
                    productId: '',
                    quantity: '',
                    reason: '',
                    comment: ''
                });
                setShowWriteOffForm(false);
                
                alert('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —Å–ø–∏—Å–∞–Ω!');
            };
            
            const getPaginatedWarehouseData = () => {
                const filtered = getFilteredWarehouseData();
                const startIndex = (warehousePage - 1) * warehousePageSize;
                const endIndex = startIndex + warehousePageSize;
                return {
                    data: filtered.slice(startIndex, endIndex),
                    total: filtered.length,
                    totalPages: Math.ceil(filtered.length / warehousePageSize)
                };
            };
            
            const handleExportToExcel = () => {
                const filtered = getFilteredWarehouseData();
                const csvContent = [
                    ['SKU', '–ù–∞–∑–≤–∞–Ω–∏–µ', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', '–ü–æ—Å—Ç–∞–≤—â–∏–∫', '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ', '–ï–¥–∏–Ω–∏—Ü–∞', '–¶–µ–Ω–∞', '–ú–∏–Ω–∏–º—É–º', '–ú–∞–∫—Å–∏–º—É–º', '–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏', '–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ'],
                    ...filtered.map(product => [
                        product.sku,
                        product.name,
                        product.category,
                        product.supplier,
                        product.quantity,
                        product.unit,
                        product.price,
                        product.minStock,
                        product.maxStock,
                        product.expiryDate,
                        product.location
                    ])
                ].map(row => row.join(',')).join('\n');
                
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `warehouse_${selectedRestaurant}_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                alert('–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ CSV —Ñ–∞–π–ª!');
            };
            
            const getUniqueCategories = () => {
                const products = getCurrentRestaurantWarehouseData();
                return [...new Set(products.map(p => p.category))].sort();
            };
            
            const getUniqueSuppliers = () => {
                const products = getCurrentRestaurantWarehouseData();
                return [...new Set(products.map(p => p.supplier))].sort();
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫–ª–∞–¥—É
            const canManagePayroll = () => {
                const result = currentUser && (currentUser.canManagePayroll || currentUser.position === '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä');
                console.log('canManagePayroll:', {
                    currentUser: currentUser,
                    canManagePayroll: currentUser?.canManagePayroll,
                    position: currentUser?.position,
                    result: result
                });
                return result;
            };
            
            const canApproveBonusPenalty = () => {
                return currentUser && (currentUser.isDirector || currentUser.position === '–ú–µ–Ω–µ–¥–∂–µ—Ä' || currentUser.position === '–î–∏—Ä–µ–∫—Ç–æ—Ä');
            };
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
            const getEmployeePayrollSlips = (employeeId) => {
                return getCurrentRestaurantPayrollSlips().filter(ps => ps.employeeId === employeeId);
            };
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–µ–º–∏–π/—à—Ç—Ä–∞—Ñ–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
            const getEmployeeBonusesPenaltiesForPeriod = (employeeId, month, year) => {
                return getCurrentRestaurantBonusesPenalties().filter(bp => 
                    bp.employeeId === employeeId && 
                    bp.status === 'approved' &&
                    new Date(bp.date).getMonth() + 1 === month &&
                    new Date(bp.date).getFullYear() === year
                );
            };
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
            const handleEditProfile = () => {
                setEditProfileData({
                    fullName: currentUser.fullName || '',
                    department: currentUser.department || '',
                    phone: currentUser.phone || '',
                    email: currentUser.email || '',
                    password: currentUser.password || '111'
                });
                setShowEditProfile(true);
            };
            
            const handleSaveProfile = () => {
                if (!editProfileData.fullName) {
                    alert('–§–ò–û –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è');
                    return;
                }
                
                if (!editProfileData.password) {
                    alert('–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è');
                    return;
                }
                
                const updatedUser = {
                    ...currentUser,
                    fullName: editProfileData.fullName,
                    department: editProfileData.department,
                    phone: editProfileData.phone,
                    email: editProfileData.email,
                    password: editProfileData.password
                };
                
                setCurrentUser(updatedUser);
                
                setEmployees(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantEmployees().map(emp => 
                        emp.id === currentUser.id ? updatedUser : emp
                    )
                }));
                
                setShowEditProfile(false);
                alert('–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!');
            };
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
            const handleChangePassword = () => {
                setPasswordChangeData({
                    currentPassword: '',
                    newPassword: '',
                    confirmPassword: ''
                });
                setShowChangePassword(true);
            };
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è
            const handleSavePassword = () => {
                // –í–∞–ª–∏–¥–∞—Ü–∏—è
                if (!passwordChangeData.currentPassword) {
                    alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å');
                    return;
                }
                
                if (!passwordChangeData.newPassword) {
                    alert('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å');
                    return;
                }
                
                if (passwordChangeData.newPassword.length < 3) {
                    alert('‚ö†Ô∏è –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞');
                    return;
                }
                
                if (passwordChangeData.newPassword !== passwordChangeData.confirmPassword) {
                    alert('‚ö†Ô∏è –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä–æ–ª—è
                const currentPassword = currentUser.password || '111';
                if (passwordChangeData.currentPassword !== currentPassword) {
                    alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å');
                    return;
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
                const updatedUser = {
                    ...currentUser,
                    password: passwordChangeData.newPassword
                };
                
                setCurrentUser(updatedUser);
                
                setEmployees(prev => ({
                    ...prev,
                    [selectedRestaurant]: getCurrentRestaurantEmployees().map(emp => 
                        emp.id === currentUser.id ? updatedUser : emp
                    )
                }));
                
                setShowChangePassword(false);
                setPasswordChangeData({
                    currentPassword: '',
                    newPassword: '',
                    confirmPassword: ''
                });
                
                alert('‚úÖ –ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!');
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ (–î–∏—Ä–µ–∫—Ç–æ—Ä, –ú–µ–Ω–µ–¥–∂–µ—Ä, HR)
            const canManageEmployees = currentUser && (
                currentUser.isDirector === true || 
                currentUser.position === '–ú–µ–Ω–µ–¥–∂–µ—Ä' || 
                currentUser.position === 'HR'
            );
            
            // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const employeesByPosition = Object.keys(POSITIONS).map(pos => ({
                position: pos,
                ...POSITIONS[pos],
                employees: getCurrentRestaurantEmployees().filter(e => e.position === pos),
                count: getCurrentRestaurantEmployees().filter(e => e.position === pos).length
            }));
            
            const handleLogin = (employee) => {
                setCurrentUser(employee);
                setIsLoggedIn(true);
                setSelectedPosition(null);
                setSelectedEmployeeFIO('');
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
                if (employee.modules && employee.modules.length > 0) {
                    setCurrentModule(employee.modules[0]);
                } else {
                    setCurrentModule('hrm');
                }
            };
            
            // –í—Ö–æ–¥ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –§–ò–û
            const handleLoginByFIO = () => {
                if (!selectedPosition || !selectedEmployeeFIO || !loginPassword) {
                    alert('‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å, –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
                    return;
                }
                
                const positionData = employeesByPosition.find(p => p.position === selectedPosition);
                const employee = positionData.employees.find(emp => emp.fullName === selectedEmployeeFIO);
                
                if (employee) {
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è (—Å fallback –Ω–∞ –ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
                    const employeePassword = employee.password || '111';
                    if (employeePassword !== loginPassword) {
                        alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ: 111');
                        return;
                    }
                    
                    setCurrentUser(employee);
                    setIsLoggedIn(true);
                    setSelectedPosition(null);
                    setSelectedEmployeeFIO('');
                    setLoginPassword('');
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
                    setSelectedEmployee(employee);
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
                    if (employee.modules && employee.modules.length > 0) {
                        setCurrentModule(employee.modules[0]);
                    } else {
                        setCurrentModule('hrm');
                    }
                } else {
                    alert('‚ùå –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            };
            
            const handleAddEmployee = () => {
                if (!canManageEmployees) {
                    alert('‚ùå –¢–æ–ª—å–∫–æ –î–∏—Ä–µ–∫—Ç–æ—Ä, –ú–µ–Ω–µ–¥–∂–µ—Ä –∏–ª–∏ HR –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤!');
                    return;
                }
                
                if (!newEmployee.fullName) {
                    alert('‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –§–ò–û –∏–∑ —Å–ø–∏—Å–∫–∞');
                    return;
                }
                
                const positionData = POSITIONS[newEmployee.position];
                
                const employee = {
                    id: 'emp_' + Date.now(),
                    position: newEmployee.position,
                    fullName: newEmployee.fullName,
                    department: newEmployee.department || '',
                    phone: newEmployee.phone || '',
                    email: newEmployee.email || '',
                    password: newEmployee.password || '111', // –ü–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    description: positionData.description,
                    permissions: positionData.permissions,
                    modules: positionData.modules,
                    icon: positionData.icon,
                    isDirector: positionData.isDirector,
                    restaurantId: selectedRestaurant
                };
                
                setEmployees(prev => ({
                    ...prev,
                    [selectedRestaurant]: [...getCurrentRestaurantEmployees(), employee]
                }));
                setNewEmployee({
                    fullName: '',
                    position: '–°–æ—Ç—Ä—É–¥–Ω–∏–∫',
                    department: '',
                    phone: '',
                    email: '',
                    password: '111'
                });
                setShowAddEmployee(false);
                alert(`‚úÖ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ ${employee.fullName} (${employee.position}) —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!`);
            };
            
            const handleDeleteEmployee = (employeeId, employeeName) => {
                if (!canManageEmployees) {
                    alert('‚ùå –¢–æ–ª—å–∫–æ –î–∏—Ä–µ–∫—Ç–æ—Ä, –ú–µ–Ω–µ–¥–∂–µ—Ä –∏–ª–∏ HR –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤!');
                    return;
                }
                
                if (employeeId === `director_${selectedRestaurant}`) {
                    alert('üîí –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞!');
                    return;
                }
                
                if (confirm(`üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ ${employeeName}?\n\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.`)) {
                    setEmployees(prev => ({
                        ...prev,
                        [selectedRestaurant]: getCurrentRestaurantEmployees().filter(emp => emp.id !== employeeId)
                    }));
                    alert(`‚úÖ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ ${employeeName} —É–¥–∞–ª–µ–Ω –∏–∑ —Å–∏—Å—Ç–µ–º—ã!`);
                }
            };
            
            const handleLogout = () => {
                setIsLoggedIn(false);
                setCurrentUser(null);
                setShowAddEmployee(false);
                setSelectedPosition(null); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –≤—ã–±–æ—Ä—É –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
                // selectedRestaurant –æ—Å—Ç–∞–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω—ã–º
            };
            
            // –í—ã–±–æ—Ä —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            const handleRestaurantSelect = (restaurantId) => {
                setSelectedRestaurant(restaurantId);
                initializeRestaurantData(restaurantId);
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–æ–¥—É–ª—é
            const hasAccessToModule = (module) => {
                if (!currentUser) return false;
                if (currentUser.permissions.includes('all')) return true;
                return currentUser.modules && currentUser.modules.includes(module);
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö
            const canViewAllEmployees = () => {
                if (!currentUser) return false;
                return ['–î–∏—Ä–µ–∫—Ç–æ—Ä', '–ú–µ–Ω–µ–¥–∂–µ—Ä', 'HR'].includes(currentUser.position);
            };
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å —É—á–µ—Ç–æ–º —Ä–æ–ª–µ–π)
            const getVisibleEmployees = () => {
                if (!currentUser) return [];
                
                if (canViewAllEmployees()) {
                    // –î–∏—Ä–µ–∫—Ç–æ—Ä, –ú–µ–Ω–µ–¥–∂–µ—Ä, HR –≤–∏–¥—è—Ç –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                    return getCurrentRestaurantEmployees();
                } else {
                    // –û–±—ã—á–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–µ–±—è
                    return getCurrentRestaurantEmployees().filter(emp => emp.id === currentUser.id);
                }
            };
            
            // –≠–ö–†–ê–ù –í–´–ë–û–†–ê –†–ï–°–¢–û–†–ê–ù–ê
            if (!selectedRestaurant) {
                return h('div', { className: 'min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center p-4' },
                    h('div', { className: 'max-w-4xl w-full' },
                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                        h('div', { className: 'text-center mb-8 savva-animate' },
                            h('div', { className: 'savva-gradient w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center shadow-lg' },
                                h('span', { className: 'text-white text-4xl font-bold' }, 'N')
                            ),
                            h('h1', { className: 'savva-heading mb-3' }, 'Novikov Group'),
                            h('p', { className: 'text-xl text-gray-600' }, '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è'),
                            h('p', { className: 'text-gray-500 mt-2' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω:')
                        ),
                        
                        // –í—ã–±–æ—Ä —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ —á–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
                        h('div', { className: 'max-w-md mx-auto mb-8' },
                            h('div', { className: 'savva-card p-6' },
                                h('label', { className: 'block text-lg font-bold text-gray-700 mb-4 text-center' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω:'),
                                h('select', {
                                    value: selectedRestaurant || '',
                                    onChange: (e) => {
                                        if (e.target.value) {
                                            handleRestaurantSelect(e.target.value);
                                        }
                                    },
                                    className: 'savva-field w-full text-lg text-center'
                                },
                                    h('option', { value: '' }, '-- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω --'),
                                    ...Object.values(RESTAURANTS).map(restaurant =>
                                        h('option', { 
                                            key: restaurant.id, 
                                            value: restaurant.id 
                                        }, `${restaurant.icon} ${restaurant.name} (${restaurant.location})`)
                                    )
                                ),
                                selectedRestaurant && h('div', { className: 'mt-4 text-center' },
                                    h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-3' },
                                        h('p', { className: 'text-sm font-semibold text-blue-800 mb-1' }, '–í—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω:'),
                                        h('p', { className: 'text-sm text-blue-700' }, RESTAURANTS[selectedRestaurant].description)
                                    )
                                )
                            )
                        ),
                        
                        h('div', { className: 'mt-8 text-center' },
                            h('p', { className: 'text-sm text-gray-500' },
                                'üí° –ö–∞–∂–¥—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω –∏–º–µ–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —Å–∫–ª–∞–¥–∞'
                            )
                        )
                    )
                );
            }
            
            // –≠–ö–†–ê–ù –í–•–û–î–ê
            if (!isLoggedIn) {
                // –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å –≤—ã–ø–∞–¥–∞—é—â–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏
                return h('div', { className: 'min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 p-4' },
                    h('div', { className: 'max-w-4xl mx-auto' },
                        // –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥
                        h('button', {
                            onClick: () => setSelectedRestaurant(null),
                            className: 'mb-6 px-4 py-2 bg-white rounded-lg shadow hover:shadow-md transition-all text-gray-700 font-medium flex items-center space-x-2'
                        },
                            h('span', null, '‚Üê'),
                            h('span', null, '–ù–∞–∑–∞–¥ –∫ –≤—ã–±–æ—Ä—É —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞')
                        ),
                        
                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                        h('div', { className: 'text-center mb-8 savva-card p-6' },
                            h('div', { className: 'flex items-center justify-center space-x-3 mb-4' },
                                h('div', { className: 'savva-gradient w-16 h-16 rounded-full flex items-center justify-center shadow-lg' },
                                    h('span', { className: 'text-white text-2xl font-bold' }, 'N')
                                ),
                                h('div', null,
                                    h('h1', { className: 'text-3xl font-bold' }, 'Novikov Group'),
                                    h('p', { className: 'text-lg savva-gold' }, `${RESTAURANTS[selectedRestaurant].name} (${RESTAURANTS[selectedRestaurant].location})`)
                                )
                            ),
                            h('h2', { className: 'text-2xl font-bold text-gray-800 mb-2' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞'),
                            h('p', { className: 'text-gray-600' }, '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∏ –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É')
                        ),
                        
                        // –§–æ—Ä–º–∞ –≤—ã–±–æ—Ä–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                        h('div', { className: 'savva-card p-6' },
                            h('div', { className: 'space-y-6' },
                                // –í—ã–±–æ—Ä –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
                                h('div', null,
                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, '–î–æ–ª–∂–Ω–æ—Å—Ç—å *'),
                                    h('select', {
                                        value: selectedPosition || '',
                                        onChange: (e) => {
                                            setSelectedPosition(e.target.value);
                                            setSelectedEmployeeFIO(''); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –§–ò–û
                                        },
                                        className: 'savva-field w-full'
                                    },
                                        h('option', { value: '' }, '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å'),
                                        ...employeesByPosition.map(pos =>
                                            h('option', { 
                                                key: pos.position, 
                                                value: pos.position,
                                                disabled: pos.count === 0
                                            }, `${pos.icon} ${pos.position} (${pos.count} —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)`)
                                        )
                                    )
                                ),
                                
                                // –í—ã–±–æ—Ä –§–ò–û (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏)
                                selectedPosition && h('div', null,
                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, '–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ *'),
                                    h('select', {
                                        value: selectedEmployeeFIO,
                                        onChange: (e) => setSelectedEmployeeFIO(e.target.value),
                                        className: 'savva-field w-full'
                                    },
                                        h('option', { value: '' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞'),
                                        ...(() => {
                                            const positionData = employeesByPosition.find(p => p.position === selectedPosition);
                                            return positionData ? positionData.employees.map(emp =>
                                                h('option', { 
                                                    key: emp.id, 
                                                    value: emp.fullName 
                                                }, emp.fullName)
                                            ) : [];
                                        })()
                                    )
                                ),
                                
                                // –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –§–ò–û)
                                selectedPosition && selectedEmployeeFIO && h('div', null,
                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, '–ü–∞—Ä–æ–ª—å *'),
                                    h('input', {
                                        type: 'password',
                                        value: loginPassword,
                                        onChange: (e) => setLoginPassword(e.target.value),
                                        placeholder: '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å',
                                        className: 'savva-field w-full'
                                    }),
                                    h('p', { className: 'text-xs text-gray-500 mt-1' }, '–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 111')
                                ),
                                
                                // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ
                                selectedPosition && selectedEmployeeFIO && (() => {
                                    const positionData = employeesByPosition.find(p => p.position === selectedPosition);
                                    const employee = positionData.employees.find(emp => emp.fullName === selectedEmployeeFIO);
                                    
                                    return employee && h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-4' },
                                        h('div', { className: 'flex items-center space-x-3' },
                                            h('span', { className: 'text-3xl' }, employee.icon),
                                            h('div', null,
                                                h('h3', { className: 'text-lg font-semibold text-gray-800' }, employee.fullName),
                                                h('p', { className: 'text-sm text-gray-600' }, employee.position),
                                                employee.department && h('p', { className: 'text-xs text-gray-500' }, `–û—Ç–¥–µ–ª: ${employee.department}`)
                                            )
                                        )
                                    );
                                })(),
                                
                                // –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞
                                h('div', { className: 'flex justify-center' },
                                    h('button', {
                                        onClick: handleLoginByFIO,
                                        disabled: !selectedPosition || !selectedEmployeeFIO || !loginPassword,
                                        className: `px-8 py-3 rounded-lg font-medium transition-all ${
                                            selectedPosition && selectedEmployeeFIO && loginPassword
                                                ? 'savva-bg-gold text-white hover:opacity-90' 
                                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                        }`
                                    }, 'üö™ –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É')
                                )
                            )
                        )
                    )
                );
                
                // –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
                return h('div', { className: 'min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center p-4' },
                    h('div', { className: 'max-w-4xl w-full' },
                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                        h('div', { className: 'text-center mb-8 savva-animate' },
                            h('div', { className: 'savva-gradient w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center shadow-lg' },
                                h('span', { className: 'text-white text-4xl font-bold' }, 'N')
                            ),
                            h('h1', { className: 'savva-heading mb-3' }, 'Novikov Group'),
                            h('p', { className: 'text-xl text-gray-600' }, '–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ–º'),
                            h('p', { className: 'text-gray-500 mt-2' }, '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –¥–ª—è –≤—Ö–æ–¥–∞')
                        ),
                        
                        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                        h('div', { className: 'mb-6 bg-white rounded-lg shadow p-4' },
                            h('div', { className: 'flex items-center justify-between mb-4' },
                                h('div', { className: 'flex items-center space-x-3' },
                                    h('span', { className: 'text-3xl' }, RESTAURANTS[selectedRestaurant].icon),
                                    h('div', null,
                                        h('h3', { className: 'text-lg font-bold text-gray-800' }, RESTAURANTS[selectedRestaurant].name),
                                        h('p', { className: 'text-sm savva-gold' }, RESTAURANTS[selectedRestaurant].location)
                                    )
                                ),
                                h('button', {
                                    onClick: () => setSelectedRestaurant(null),
                                    className: 'px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors'
                                }, 'üîÑ –°–º–µ–Ω–∏—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω')
                            ),
                            h('div', { className: 'grid grid-cols-3 md:grid-cols-6 gap-4 text-center text-sm' },
                                h('div', null,
                                    h('p', { className: 'text-2xl font-bold savva-gold' }, getCurrentRestaurantEmployees().length),
                                    h('p', { className: 'text-gray-600' }, '–í—Å–µ–≥–æ')
                                ),
                                ...Object.keys(POSITIONS).map(pos => 
                                    h('div', { key: pos },
                                        h('p', { className: 'text-2xl font-bold text-gray-700' }, getCurrentRestaurantEmployees().filter(e => e.position === pos).length),
                                        h('p', { className: 'text-gray-600' }, POSITIONS[pos].icon)
                                    )
                                )
                            )
                        ),
                        
                        // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Ä–æ–ª–µ–π)
                        canManageEmployees && h('div', { className: 'mb-6' },
                            !showAddEmployee ?
                                h('button', {
                                    onClick: () => setShowAddEmployee(true),
                                    className: 'w-full px-6 py-4 savva-bg-gold text-white rounded-lg hover:opacity-90 transition-opacity font-bold text-lg'
                                }, `${currentUser?.icon || 'üëë'} ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (${currentUser?.position || '–£–ø—Ä–∞–≤–ª—è—é—â–∏–π'})`)
                            :
                                h('div', { className: 'savva-card p-6 border-4 border-purple-200' },
                                    h('h3', { className: 'text-xl font-bold mb-4 flex items-center space-x-2' },
                                        h('span', null, currentUser?.icon || 'üëë'),
                                        h('span', null, '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞'),
                                        h('span', { className: 'text-sm font-normal text-purple-600 ml-3' }, `(${currentUser?.position || '–£–ø—Ä–∞–≤–ª—è—é—â–∏–π'})`)
                                    ),
                                    h('div', { className: 'space-y-4' },
                                        // –§–ò–û
                                        h('div', null,
                                            h('label', { className: 'block text-sm font-bold text-gray-700 mb-2' }, '–í—ã–±–µ—Ä–∏—Ç–µ –§–ò–û *'),
                                            h('select', {
                                                value: newEmployee.fullName,
                                                onChange: (e) => setNewEmployee({...newEmployee, fullName: e.target.value}),
                                                className: 'savva-field w-full text-lg'
                                            },
                                                h('option', { value: '' }, '-- –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ --'),
                                                ...FIO_LIST.map(fio =>
                                                    h('option', { key: fio, value: fio }, fio)
                                                )
                                            )
                                        ),
                                        
                                        // –î–æ–ª–∂–Ω–æ—Å—Ç—å
                                        h('div', null,
                                            h('label', { className: 'block text-sm font-bold text-gray-700 mb-2' }, '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å *'),
                                            h('select', {
                                                value: newEmployee.position,
                                                onChange: (e) => setNewEmployee({...newEmployee, position: e.target.value}),
                                                className: 'savva-field w-full text-lg'
                                            },
                                                ...Object.keys(POSITIONS).map(pos =>
                                                    h('option', { key: pos, value: pos }, `${POSITIONS[pos].icon} ${pos}`)
                                                )
                                            )
                                        ),
                                        
                                        // –û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
                                        h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-3' },
                                            h('p', { className: 'text-sm font-semibold text-blue-800 mb-1' }, '–†–∞–∑—Ä–µ—à–µ–Ω–∏—è:'),
                                            h('p', { className: 'text-sm text-blue-700' }, POSITIONS[newEmployee.position].description)
                                        )
                                    ),
                                    h('div', { className: 'mt-6 flex space-x-3' },
                                        h('button', {
                                            onClick: () => {
                                                setShowAddEmployee(false);
                                                setNewEmployee({ fullName: '', position: '–°–æ—Ç—Ä—É–¥–Ω–∏–∫' });
                                            },
                                            className: 'flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-semibold'
                                        }, '–û—Ç–º–µ–Ω–∞'),
                                        h('button', {
                                            onClick: handleAddEmployee,
                                            className: 'flex-1 px-6 py-3 savva-button text-lg'
                                        }, '‚úÖ –î–æ–±–∞–≤–∏—Ç—å')
                                    )
                                )
                        ),
                        
                        // –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
                        h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
                            employeesByPosition.map((posData) =>
                                h('div', {
                                    key: posData.position,
                                    className: 'savva-card p-6 cursor-pointer hover:scale-105 transition-transform duration-300',
                                    onClick: () => setSelectedPosition(posData.position)
                                },
                                    h('div', { className: 'text-center' },
                                        h('div', { className: 'text-6xl mb-3' }, posData.icon),
                                        h('h3', { className: 'text-2xl font-bold text-gray-800 mb-2' }, posData.position),
                                        h('p', { className: 'text-3xl font-bold savva-gold mb-2' }, posData.count),
                                        h('p', { className: 'text-sm text-gray-600 mb-4' }, posData.description),
                                        h('button', { className: 'savva-button w-full' }, 
                                            posData.count > 0 ? `–í—ã–±—Ä–∞—Ç—å (${posData.count}) ‚Üí` : '–ù–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤'
                                        )
                                    )
                                )
                            )
                        ),
                        
                        // –ü–æ–¥—Å–∫–∞–∑–∫–∞
                        h('div', { className: 'mt-8 text-center' },
                            h('p', { className: 'text-sm text-gray-500' },
                                getCurrentRestaurantEmployees().length === 1 
                                    ? 'üí° –°–∏—Å—Ç–µ–º–∞ –ø—É—Å—Ç–∞. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –î–∏—Ä–µ–∫—Ç–æ—Ä –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.'
                                    : `üí° –í —Å–∏—Å—Ç–µ–º–µ ${getCurrentRestaurantEmployees().length} —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å.`
                            )
                        )
                    )
                );
            }
            
            // –ì–õ–ê–í–ù–û–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞)
            return h('div', { className: 'min-h-screen bg-gray-100' },
                // –ú–æ–¥–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
                showEditProfile && h('div', { 
                    className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
                    onClick: () => setShowEditProfile(false)
                },
                    h('div', {
                        className: 'bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full m-4',
                        onClick: (e) => e.stopPropagation()
                    },
                        h('h2', { className: 'text-2xl font-bold mb-4 flex items-center space-x-2' },
                            h('span', null, '‚úèÔ∏è'),
                            h('span', null, '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è')
                        ),
                        
                        h('div', { className: 'space-y-4' },
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–§–ò–û *'),
                                h('input', {
                                    type: 'text',
                                    value: editProfileData.fullName,
                                    onChange: (e) => setEditProfileData({...editProfileData, fullName: e.target.value}),
                                    placeholder: '–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ',
                                    className: 'savva-field w-full'
                                })
                            ),
                            
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–î–æ–ª–∂–Ω–æ—Å—Ç—å'),
                                h('input', {
                                    type: 'text',
                                    value: currentUser.position,
                                    disabled: true,
                                    className: 'savva-field w-full bg-gray-100 cursor-not-allowed'
                                }),
                                h('p', { className: 'text-xs text-gray-500 mt-1' }, 'üí° –î–æ–ª–∂–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ HR –∏–ª–∏ –î–∏—Ä–µ–∫—Ç–æ—Ä')
                            ),
                            
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–û—Ç–¥–µ–ª'),
                                h('input', {
                                    type: 'text',
                                    value: editProfileData.department || '',
                                    onChange: (e) => setEditProfileData({...editProfileData, department: e.target.value}),
                                    placeholder: '–ö—É—Ö–Ω—è, –ó–∞–ª, –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è...',
                                    className: 'savva-field w-full'
                                })
                            ),
                            
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–¢–µ–ª–µ—Ñ–æ–Ω'),
                                h('input', {
                                    type: 'tel',
                                    value: editProfileData.phone || '',
                                    onChange: (e) => setEditProfileData({...editProfileData, phone: e.target.value}),
                                    placeholder: '+7 (999) 123-45-67',
                                    className: 'savva-field w-full'
                                })
                            ),
                            
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Email'),
                                h('input', {
                                    type: 'email',
                                    value: editProfileData.email || '',
                                    onChange: (e) => setEditProfileData({...editProfileData, email: e.target.value}),
                                    placeholder: 'employee@restaurant.com',
                                    className: 'savva-field w-full'
                                })
                            ),
                            
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ü–∞—Ä–æ–ª—å *'),
                                h('input', {
                                    type: 'password',
                                    value: editProfileData.password || '',
                                    onChange: (e) => setEditProfileData({...editProfileData, password: e.target.value}),
                                    placeholder: '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å',
                                    className: 'savva-field w-full'
                                }),
                                h('p', { className: 'text-xs text-gray-500 mt-1' }, '–ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞')
                            )
                        ),
                        
                        h('div', { className: 'mt-6 flex justify-end space-x-3' },
                            h('button', {
                                onClick: () => setShowEditProfile(false),
                                className: 'px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors'
                            }, '–û—Ç–º–µ–Ω–∞'),
                            h('button', {
                                onClick: handleSaveProfile,
                                className: 'px-6 py-2 savva-button'
                            }, '‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å')
                        )
                    )
                ),
                
                // –ú–æ–¥–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
                showChangePassword && h('div', { 
                    className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
                    onClick: () => setShowChangePassword(false)
                },
                    h('div', {
                        className: 'bg-white rounded-lg shadow-xl p-6 max-w-md w-full m-4',
                        onClick: (e) => e.stopPropagation()
                    },
                        h('h2', { className: 'text-2xl font-bold mb-4 flex items-center space-x-2' },
                            h('span', null, 'üîë'),
                            h('span', null, '–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è')
                        ),
                        
                        h('div', { className: 'space-y-4' },
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å *'),
                                h('input', {
                                    type: 'password',
                                    value: passwordChangeData.currentPassword,
                                    onChange: (e) => setPasswordChangeData({...passwordChangeData, currentPassword: e.target.value}),
                                    placeholder: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å',
                                    className: 'savva-field w-full'
                                })
                            ),
                            
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å *'),
                                h('input', {
                                    type: 'password',
                                    value: passwordChangeData.newPassword,
                                    onChange: (e) => setPasswordChangeData({...passwordChangeData, newPassword: e.target.value}),
                                    placeholder: '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)',
                                    className: 'savva-field w-full'
                                }),
                                h('p', { className: 'text-xs text-gray-500 mt-1' }, 'üí° –ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞')
                            ),
                            
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è *'),
                                h('input', {
                                    type: 'password',
                                    value: passwordChangeData.confirmPassword,
                                    onChange: (e) => setPasswordChangeData({...passwordChangeData, confirmPassword: e.target.value}),
                                    placeholder: '–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å',
                                    className: 'savva-field w-full'
                                })
                            ),
                            
                            h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-3' },
                                h('div', { className: 'flex items-start space-x-2' },
                                    h('span', { className: 'text-blue-500 mt-0.5' }, '‚ÑπÔ∏è'),
                                    h('div', null,
                                        h('p', { className: 'text-sm text-blue-800 font-medium' }, '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è'),
                                        h('p', { className: 'text-xs text-blue-600 mt-1' }, '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –∑–∞—â–∏—Ç—ã –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞')
                                    )
                                )
                            )
                        ),
                        
                        h('div', { className: 'flex justify-end space-x-3 mt-6' },
                            h('button', {
                                onClick: () => setShowChangePassword(false),
                                className: 'px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors'
                            }, '–û—Ç–º–µ–Ω–∞'),
                            h('button', {
                                onClick: handleSavePassword,
                                className: 'px-6 py-2 savva-button'
                            }, 'üîë –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å')
                        )
                    )
                ),
                
                // –ú–æ–¥–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                showDocumentUpload && h('div', { 
                    className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
                    onClick: () => setShowDocumentUpload(false)
                },
                    h('div', {
                        className: 'bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full m-4 max-h-[90vh] overflow-y-auto',
                        onClick: (e) => e.stopPropagation()
                    },
                        h('h2', { className: 'text-2xl font-bold mb-4 flex items-center space-x-2' },
                            h('span', null, 'üìÑ'),
                            h('span', null, '–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞')
                        ),
                        
                        h('div', { className: 'space-y-4' },
                            // –í—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–°–æ—Ç—Ä—É–¥–Ω–∏–∫ *'),
                                h('select', {
                                    value: documentUploadData.employeeId,
                                    onChange: (e) => setDocumentUploadData({...documentUploadData, employeeId: e.target.value}),
                                    className: 'savva-field w-full'
                                },
                                    h('option', { value: '' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞'),
                                    ...getCurrentRestaurantEmployees().map(emp =>
                                        h('option', { 
                                            key: emp.id, 
                                            value: emp.id 
                                        }, emp.fullName)
                                    )
                                )
                            ),
                            
                            // –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ *'),
                                h('select', {
                                    value: documentUploadData.documentType,
                                    onChange: (e) => setDocumentUploadData({...documentUploadData, documentType: e.target.value}),
                                    className: 'savva-field w-full'
                                },
                                    h('option', { value: '' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞'),
                                    h('optgroup', { label: '–î–æ–∫—É–º–µ–Ω—Ç—ã' },
                                        h('option', { value: 'passport' }, 'üÜî –ü–∞—Å–ø–æ—Ä—Ç'),
                                        h('option', { value: 'inn' }, 'üìã –ò–ù–ù'),
                                        h('option', { value: 'snils' }, 'üìÑ –°–ù–ò–õ–°'),
                                        h('option', { value: 'military_id' }, 'üéñÔ∏è –í–æ–µ–Ω–Ω—ã–π –±–∏–ª–µ—Ç'),
                                        h('option', { value: 'education' }, 'üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ'),
                                        h('option', { value: 'medical' }, 'üè• –ú–µ–¥–∫–Ω–∏–∂–∫–∞'),
                                        h('option', { value: 'contract' }, 'üìù –¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä')
                                    ),
                                    h('optgroup', { label: '–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ' },
                                        h('option', { value: 'personal_info' }, 'üë§ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'),
                                        h('option', { value: 'family_info' }, 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ'),
                                        h('option', { value: 'address_info' }, 'üè† –ê–¥—Ä–µ—Å –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è'),
                                        h('option', { value: 'contact_info' }, 'üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'),
                                        h('option', { value: 'emergency_contact' }, 'üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã'),
                                        h('option', { value: 'bank_info' }, 'üè¶ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã'),
                                        h('option', { value: 'tax_info' }, 'üí∞ –ù–∞–ª–æ–≥–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'),
                                        h('option', { value: 'benefits_info' }, 'üéÅ –õ—å–≥–æ—Ç—ã –∏ –ø–æ—Å–æ–±–∏—è')
                                    ),
                                    h('option', { value: 'other' }, 'üìé –î—Ä—É–≥–æ–µ')
                                )
                            ),
                            
                            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–§–∞–π–ª *'),
                                h('input', {
                                    type: 'file',
                                    onChange: handleFileChange,
                                    accept: '.jpg,.jpeg,.png,.pdf',
                                    className: 'savva-field w-full'
                                }),
                                h('p', { className: 'text-xs text-gray-500 mt-1' }, '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, PDF. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB')
                            ),
                            
                            // –û–ø–∏—Å–∞–Ω–∏–µ
                            h('div', null,
                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–û–ø–∏—Å–∞–Ω–∏–µ'),
                                h('textarea', {
                                    value: documentUploadData.description,
                                    onChange: (e) => setDocumentUploadData({...documentUploadData, description: e.target.value}),
                                    placeholder: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–∫—É–º–µ–Ω—Ç–µ',
                                    rows: 3,
                                    className: 'savva-field w-full'
                                })
                            ),
                            
                            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ
                            documentUploadData.file && h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-3' },
                                h('div', { className: 'flex items-center space-x-2' },
                                    h('span', { className: 'text-blue-600' }, 'üìé'),
                                    h('div', null,
                                        h('p', { className: 'text-sm text-blue-800 font-medium' }, documentUploadData.file.name),
                                        h('p', { className: 'text-xs text-blue-600' }, 
                                            `–†–∞–∑–º–µ—Ä: ${(documentUploadData.file.size / 1024 / 1024).toFixed(2)} MB`
                                        )
                                    )
                                )
                            ),
                            
                            // –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                            documentUploadData.employeeId && h('div', null,
                                h('h3', { className: 'text-lg font-semibold text-gray-800 mb-3' }, '–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã'),
                                getEmployeeDocuments(documentUploadData.employeeId).length === 0 ?
                                    h('p', { className: 'text-gray-500 text-center py-4' }, '–î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã') :
                                    h('div', { className: 'space-y-2 max-h-40 overflow-y-auto' },
                                        getEmployeeDocuments(documentUploadData.employeeId).map(doc =>
                                            h('div', {
                                                key: doc.id,
                                                className: 'flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-2'
                                            },
                                                h('div', { className: 'flex items-center space-x-2' },
                                                    h('span', { className: 'text-gray-600' }, 
                                                        doc.type === 'passport' ? 'üÜî' :
                                                        doc.type === 'inn' ? 'üìã' :
                                                        doc.type === 'snils' ? 'üìÑ' :
                                                        doc.type === 'military_id' ? 'üéñÔ∏è' :
                                                        doc.type === 'education' ? 'üéì' :
                                                        doc.type === 'medical' ? 'üè•' :
                                                        doc.type === 'contract' ? 'üìù' : 'üìé'
                                                    ),
                                                    h('div', null,
                                                        h('p', { className: 'text-sm font-medium text-gray-800' }, doc.fileName),
                                                        h('p', { className: 'text-xs text-gray-600' }, 
                                                            `${doc.type} ‚Ä¢ ${new Date(doc.uploadDate).toLocaleDateString()}`
                                                        )
                                                    )
                                                ),
                                                h('button', {
                                                    onClick: () => handleDeleteDocument(doc.id),
                                                    className: 'w-6 h-6 bg-red-500 text-white rounded-full hover:bg-red-600 flex items-center justify-center text-xs font-bold'
                                                }, '√ó')
                                            )
                                        )
                                    )
                            )
                        ),
                        
                        h('div', { className: 'flex justify-end space-x-3 mt-6' },
                            h('button', {
                                onClick: () => setShowDocumentUpload(false),
                                className: 'px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors'
                            }, '–û—Ç–º–µ–Ω–∞'),
                            h('button', {
                                onClick: handleDocumentUpload,
                                disabled: !documentUploadData.employeeId || !documentUploadData.documentType || !documentUploadData.file,
                                className: `px-6 py-2 rounded-lg font-medium transition-colors ${
                                    documentUploadData.employeeId && documentUploadData.documentType && documentUploadData.file
                                        ? 'savva-bg-gold text-white hover:opacity-90' 
                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                }`
                            }, 'üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç')
                        )
                    )
                ),
                
                // –ù–∞–≤–∏–≥–∞—Ü–∏—è
                h('nav', { className: 'bg-white shadow-lg border-b-4 border-yellow-500' },
                    h('div', { className: 'max-w-7xl mx-auto px-4 py-4' },
                        h('div', { className: 'flex justify-between items-center' },
                            h('div', { className: 'flex items-center space-x-8' },
                                h('div', { className: 'flex items-center space-x-3' },
                                    h('div', { className: 'savva-gradient w-10 h-10 rounded-full flex items-center justify-center' },
                                        h('span', { className: 'text-white text-xl font-bold' }, 'N')
                                    ),
                                    h('div', null,
                                        h('h1', { className: 'text-2xl font-bold' }, 'Novikov Group'),
                                        h('p', { className: 'text-sm savva-gold' }, `${RESTAURANTS[selectedRestaurant].name} (${RESTAURANTS[selectedRestaurant].location})`)
                                    )
                                ),
                                h('div', { className: 'flex space-x-4' },
                                    hasAccessToModule('hrm') && h('button', {
                                        onClick: () => setCurrentModule('hrm'),
                                        className: `px-4 py-2 rounded-md font-medium transition-all ${
                                            currentModule === 'hrm' ? 'savva-bg-gold text-white' : 'text-gray-600 hover:bg-gray-100'
                                        }`
                                    }, 'HRM'),
                                    hasAccessToModule('warehouse') && h('button', {
                                        onClick: () => setCurrentModule('warehouse'),
                                        className: `px-4 py-2 rounded-md font-medium transition-all ${
                                            currentModule === 'warehouse' ? 'savva-bg-gold text-white' : 'text-gray-600 hover:bg-gray-100'
                                        }`
                                    }, '–°–∫–ª–∞–¥'),
                                )
                            ),
                            h('div', { className: 'flex items-center space-x-4' },
                                h('div', { className: 'text-right' },
                                    h('p', { className: 'font-bold text-gray-800' }, currentUser.fullName),
                                    h('p', { className: 'text-sm savva-gold' }, currentUser.icon + ' ' + currentUser.position)
                                ),
                                h('button', {
                                    onClick: handleEditProfile,
                                    className: 'px-3 py-2 bg-purple-50 text-purple-600 hover:bg-purple-100 rounded-md font-medium text-sm'
                                }, '‚úèÔ∏è –ü—Ä–æ—Ñ–∏–ª—å'),
                                h('button', {
                                    onClick: handleChangePassword,
                                    className: 'px-3 py-2 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-md font-medium text-sm'
                                }, 'üîë –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å'),
                                h('button', {
                                    onClick: handleLogout,
                                    className: 'px-4 py-2 bg-red-50 text-red-600 hover:bg-red-100 rounded-md font-medium'
                                }, 'üö™ –í—ã–π—Ç–∏')
                            )
                        )
                    )
                ),
                
                // –ö–æ–Ω—Ç–µ–Ω—Ç
                h('main', { className: 'max-w-7xl mx-auto py-8 px-4' },
                    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                    h('div', { className: 'mb-6 savva-card p-4' },
                        h('div', { className: 'flex items-center justify-between' },
                            h('div', { className: 'flex items-center space-x-3' },
                                h('span', { className: 'text-3xl' }, currentUser.icon),
                                h('div', null,
                                    h('p', { className: 'text-sm text-gray-500' }, '–í—ã –≤–æ—à–ª–∏ –∫–∞–∫:'),
                                    h('p', { className: 'text-lg font-bold' }, currentUser.fullName),
                                    h('p', { className: 'text-sm savva-gold' }, currentUser.position)
                                )
                            ),
                            h('div', { className: 'text-right' },
                                h('div', { className: 'flex items-center space-x-2 mb-2' },
                                    h('span', { className: 'text-xs text-green-600' }, 'üíæ'),
                                    h('span', { className: 'text-xs text-green-600' }, '–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã')
                                ),
                                h('p', { className: 'text-sm text-gray-600' }, '–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥—É–ª–∏:'),
                                h('div', { className: 'flex gap-2 justify-end mt-1' },
                                    currentUser.permissions.includes('all') ?
                                        h('span', { className: 'px-3 py-1 text-xs font-bold rounded-full bg-purple-100 text-purple-700' }, '‚≠ê –í–°–ï –ú–û–î–£–õ–ò') :
                                        currentUser.modules.map(mod =>
                                            h('span', {
                                                key: mod,
                                                className: 'px-3 py-1 text-xs font-bold rounded-full bg-blue-100 text-blue-700'
                                            }, mod.toUpperCase())
                                        )
                                )
                            )
                        )
                    ),
                    
                    // –ú–æ–¥—É–ª–∏
                    currentModule === 'hrm' && h('div', { className: 'space-y-6' },
                        h('div', { className: 'bg-white rounded-lg shadow p-4' },
                            h('div', { className: 'flex space-x-4' },
                                ['employees', 'vacations', 'payroll', ...(currentUser.position === '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä' ? ['accounting'] : [])].map(section =>
                                    h('button', {
                                        key: section,
                                        onClick: () => setCurrentSection(section),
                                        className: `px-4 py-2 rounded-md font-medium ${
                                            currentSection === section ? 'bg-blue-100 text-blue-700' : 'text-gray-600 hover:bg-gray-100'
                                        }`
                                    }, section === 'employees' ? '–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏' : 
                                       section === 'vacations' ? '–û—Ç–ø—É—Å–∫–∞' : 
                                       section === 'payroll' ? '–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç–∫–∏' : '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è')
                                )
                            )
                        ),
                        h('div', { className: 'savva-card p-6' },
                            h('h2', { className: 'text-2xl font-bold mb-4' }, 
                                currentSection === 'employees' ? '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏' :
                                currentSection === 'vacations' ? '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞–º–∏' : 
                                currentSection === 'payroll' ? '–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç–∫–∏' : '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è'
                            ),
                            currentSection === 'employees' ? 
                                // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ—ë, –∏–Ω–∞—á–µ —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                                selectedEmployee ? 
                                    // –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                                    h('div', { className: 'space-y-4' },
                                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π –≤–æ–∑–≤—Ä–∞—Ç–∞
                                        h('div', { className: 'flex justify-between items-center mb-4' },
                                            h('h2', { className: 'text-2xl font-bold text-gray-800' }, '–ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞'),
                                            h('button', {
                                                onClick: () => setSelectedEmployee(null),
                                                className: 'px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors'
                                            }, '‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É')
                                        ),
                                        
                                        // –í—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞/–º–µ–Ω–µ–¥–∂–µ—Ä–∞/HR
                                        canViewAllEmployees() && h('div', { className: 'mb-4' },
                                            h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:'),
                                            h('select', {
                                                value: selectedEmployee.id,
                                                onChange: (e) => {
                                                    const employee = getCurrentRestaurantEmployees().find(emp => emp.id === e.target.value);
                                                    if (employee) {
                                                        setSelectedEmployee(employee);
                                                    }
                                                },
                                                className: 'savva-field w-full'
                                            },
                                                ...getCurrentRestaurantEmployees().map(emp =>
                                                    h('option', { 
                                                        key: emp.id, 
                                                        value: emp.id 
                                                    }, emp.fullName)
                                                )
                                            )
                                        ),
                                        
                                        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ
                                        h('div', { className: 'bg-gray-50 rounded-lg p-4 mb-4' },
                                            h('div', { className: 'flex items-center space-x-4' },
                                                h('div', { className: 'text-4xl' }, selectedEmployee.icon),
                                                h('div', null,
                                                    h('h3', { className: 'text-xl font-bold text-gray-800' }, selectedEmployee.fullName),
                                                    h('p', { className: 'text-lg text-gray-600' }, selectedEmployee.position),
                                                    selectedEmployee.department && h('p', { className: 'text-sm text-gray-500' }, `–û—Ç–¥–µ–ª: ${selectedEmployee.department}`)
                                                )
                                            )
                                        ),
                                        
                                        // –í–∫–ª–∞–¥–∫–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                                        h('div', { className: 'border-b border-gray-200 mb-4' },
                                            h('div', { className: 'flex space-x-4' },
                                                ['personal', 'hr_data', 'documents', 'vacations', 'payroll'].map(tab =>
                                                    h('button', {
                                                        key: tab,
                                                        onClick: () => setEmployeeCardTab(tab),
                                                        className: `px-4 py-2 font-medium border-b-2 transition-colors ${
                                                            employeeCardTab === tab 
                                                                ? 'border-blue-500 text-blue-600' 
                                                                : 'border-transparent text-gray-500 hover:text-gray-700'
                                                        }`
                                                    }, 
                                                        tab === 'personal' ? 'üë§ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ' :
                                                        tab === 'hr_data' ? 'üìã –î–∞–Ω–Ω—ã–µ HR' :
                                                        tab === 'documents' ? 'üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã' : 
                                                        tab === 'vacations' ? 'üèñÔ∏è –û—Ç–ø—É—Å–∫–∞' : 'üí∞ –†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã'
                                                    )
                                                )
                                            )
                                        ),
                                        
                                        // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫
                                        employeeCardTab === 'personal' && h('div', { className: 'space-y-4' },
                                            h('h4', { className: 'text-lg font-semibold text-gray-800' }, '–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'),
                                            h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                                                h('div', null,
                                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–§–ò–û'),
                                                    h('p', { className: 'text-gray-900 bg-gray-100 p-2 rounded' }, selectedEmployee.fullName)
                                                ),
                                                h('div', null,
                                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–î–æ–ª–∂–Ω–æ—Å—Ç—å'),
                                                    h('p', { className: 'text-gray-900 bg-gray-100 p-2 rounded' }, selectedEmployee.position)
                                                ),
                                                selectedEmployee.department && h('div', null,
                                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–û—Ç–¥–µ–ª'),
                                                    h('p', { className: 'text-gray-900 bg-gray-100 p-2 rounded' }, selectedEmployee.department)
                                                ),
                                                selectedEmployee.phone && h('div', null,
                                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–¢–µ–ª–µ—Ñ–æ–Ω'),
                                                    h('p', { className: 'text-gray-900 bg-gray-100 p-2 rounded' }, selectedEmployee.phone)
                                                ),
                                                selectedEmployee.email && h('div', null,
                                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Email'),
                                                    h('p', { className: 'text-gray-900 bg-gray-100 p-2 rounded' }, selectedEmployee.email)
                                                ),
                                                h('div', null,
                                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞'),
                                                    h('div', { className: 'flex flex-wrap gap-1' },
                                                        selectedEmployee.permissions.map(perm =>
                                                            h('span', {
                                                                key: perm,
                                                                className: `px-2 py-1 text-xs font-medium rounded-full ${
                                                                    perm === 'all' ? 'bg-purple-100 text-purple-700' :
                                                                    perm === 'hrm' ? 'bg-blue-100 text-blue-700' :
                                                                    perm === 'warehouse' ? 'bg-green-100 text-green-700' :
                                                                    perm === 'reports' ? 'bg-yellow-100 text-yellow-700' :
                                                                    'bg-gray-100 text-gray-600'
                                                                }`
                                                            }, perm.replace('_', ' ').toUpperCase())
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        
                                        employeeCardTab === 'hr_data' && h('div', { className: 'space-y-4' },
                                            h('h4', { className: 'text-lg font-semibold text-gray-800' }, '–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ HR'),
                                            h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4' },
                                                h('div', { className: 'flex items-center space-x-2' },
                                                    h('span', { className: 'text-blue-600' }, '‚ÑπÔ∏è'),
                                                    h('p', { className: 'text-sm text-blue-700' }, 
                                                        '–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ HR-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º'
                                                    )
                                                )
                                            ),
                                            getEmployeeDocuments(selectedEmployee.id).filter(doc => 
                                                ['personal_info', 'family_info', 'address_info', 'contact_info', 
                                                 'emergency_contact', 'bank_info', 'tax_info', 'benefits_info'].includes(doc.type)
                                            ).length === 0 ?
                                                h('p', { className: 'text-gray-500 text-center py-8' }, '–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã') :
                                                h('div', { className: 'space-y-3' },
                                                    getEmployeeDocuments(selectedEmployee.id).filter(doc => 
                                                        ['personal_info', 'family_info', 'address_info', 'contact_info', 
                                                         'emergency_contact', 'bank_info', 'tax_info', 'benefits_info'].includes(doc.type)
                                                    ).map(doc =>
                                                        h('div', {
                                                            key: doc.id,
                                                            className: 'bg-white border border-gray-200 rounded-lg p-4 shadow-sm'
                                                        },
                                                            h('div', { className: 'flex items-start justify-between' },
                                                                h('div', { className: 'flex items-start space-x-3' },
                                                                    h('span', { className: 'text-gray-600 text-2xl mt-1' }, 
                                                                        doc.type === 'personal_info' ? 'üë§' :
                                                                        doc.type === 'family_info' ? 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶' :
                                                                        doc.type === 'address_info' ? 'üè†' :
                                                                        doc.type === 'contact_info' ? 'üìû' :
                                                                        doc.type === 'emergency_contact' ? 'üö®' :
                                                                        doc.type === 'bank_info' ? 'üè¶' :
                                                                        doc.type === 'tax_info' ? 'üí∞' :
                                                                        doc.type === 'benefits_info' ? 'üéÅ' : 'üìé'
                                                                    ),
                                                                    h('div', { className: 'flex-1' },
                                                                        h('h5', { className: 'font-semibold text-gray-800 mb-1' }, 
                                                                            doc.type === 'personal_info' ? '–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' :
                                                                            doc.type === 'family_info' ? '–°–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ' :
                                                                            doc.type === 'address_info' ? '–ê–¥—Ä–µ—Å –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è' :
                                                                            doc.type === 'contact_info' ? '–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' :
                                                                            doc.type === 'emergency_contact' ? '–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã' :
                                                                            doc.type === 'bank_info' ? '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã' :
                                                                            doc.type === 'tax_info' ? '–ù–∞–ª–æ–≥–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' :
                                                                            doc.type === 'benefits_info' ? '–õ—å–≥–æ—Ç—ã –∏ –ø–æ—Å–æ–±–∏—è' : '–î—Ä—É–≥–æ–µ'
                                                                        ),
                                                                        h('p', { className: 'text-sm text-gray-600 mb-2' }, doc.fileName),
                                                                        doc.description && h('p', { className: 'text-sm text-gray-500 mb-2' }, doc.description),
                                                                        h('p', { className: 'text-xs text-gray-400' }, 
                                                                            `–ó–∞–≥—Ä—É–∂–µ–Ω–æ: ${new Date(doc.uploadDate).toLocaleDateString()}`
                                                                        )
                                                                    )
                                                                ),
                                                                canManageEmployees && h('button', {
                                                                    onClick: () => handleDeleteDocument(doc.id),
                                                                    className: 'w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 flex items-center justify-center text-sm font-bold'
                                                                }, '√ó')
                                                            )
                                                        )
                                                    )
                                                )
                                        ),
                                        
                                        employeeCardTab === 'documents' && h('div', { className: 'space-y-4' },
                                            h('h4', { className: 'text-lg font-semibold text-gray-800' }, '–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã'),
                                            h('div', { className: 'bg-green-50 border border-green-200 rounded-lg p-3 mb-4' },
                                                h('div', { className: 'flex items-center space-x-2' },
                                                    h('span', { className: 'text-green-600' }, 'üìã'),
                                                    h('p', { className: 'text-sm text-green-700' }, 
                                                        '–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: –ø–∞—Å–ø–æ—Ä—Ç, –ò–ù–ù, –°–ù–ò–õ–°, –≤–æ–µ–Ω–Ω—ã–π –±–∏–ª–µ—Ç, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –º–µ–¥–∫–Ω–∏–∂–∫–∞, —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä'
                                                    )
                                                )
                                            ),
                                            getEmployeeDocuments(selectedEmployee.id).filter(doc => 
                                                ['passport', 'inn', 'snils', 'military_id', 'education', 'medical', 'contract'].includes(doc.type)
                                            ).length === 0 ?
                                                h('p', { className: 'text-gray-500 text-center py-8' }, '–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã') :
                                                h('div', { className: 'space-y-2' },
                                                    getEmployeeDocuments(selectedEmployee.id).filter(doc => 
                                                        ['passport', 'inn', 'snils', 'military_id', 'education', 'medical', 'contract'].includes(doc.type)
                                                    ).map(doc =>
                                                        h('div', {
                                                            key: doc.id,
                                                            className: 'flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3'
                                                        },
                                                            h('div', { className: 'flex items-center space-x-3' },
                                                                h('span', { className: 'text-gray-600 text-xl' }, 
                                                                    doc.type === 'passport' ? 'üÜî' :
                                                                    doc.type === 'inn' ? 'üìã' :
                                                                    doc.type === 'snils' ? 'üìÑ' :
                                                                    doc.type === 'military_id' ? 'üéñÔ∏è' :
                                                                    doc.type === 'education' ? 'üéì' :
                                                                    doc.type === 'medical' ? 'üè•' :
                                                                    doc.type === 'contract' ? 'üìù' : 'üìé'
                                                                ),
                                                                h('div', null,
                                                                    h('p', { className: 'font-medium text-gray-800' }, doc.fileName),
                                                                    h('p', { className: 'text-sm text-gray-600' }, 
                                                                        `${doc.type} ‚Ä¢ ${new Date(doc.uploadDate).toLocaleDateString()}`
                                                                    ),
                                                                    doc.description && h('p', { className: 'text-xs text-gray-500' }, doc.description)
                                                                )
                                                            ),
                                                            canManageEmployees && h('button', {
                                                                onClick: () => handleDeleteDocument(doc.id),
                                                                className: 'w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 flex items-center justify-center text-sm font-bold'
                                                            }, '√ó')
                                                        )
                                                    )
                                                )
                                        ),
                                        
                                        employeeCardTab === 'vacations' && h('div', { className: 'space-y-4' },
                                            h('h4', { className: 'text-lg font-semibold text-gray-800' }, '–û—Ç–ø—É—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞'),
                                            h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4' },
                                                h('div', { className: 'flex items-center space-x-2' },
                                                    h('span', { className: 'text-blue-600' }, 'üìÖ'),
                                                    h('p', { className: 'text-sm text-blue-700' }, 
                                                        `–î–æ—Å—Ç—É–ø–Ω–æ –¥–Ω–µ–π –æ—Ç–ø—É—Å–∫–∞: ${getAvailableVacationDays(selectedEmployee.id)}`
                                                    )
                                                )
                                            ),
                                            getCurrentRestaurantVacations().filter(vac => vac.employeeId === selectedEmployee.id).length === 0 ?
                                                h('p', { className: 'text-gray-500 text-center py-8' }, '–ó–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫ –Ω–µ –ø–æ–¥–∞–≤–∞–ª–∏—Å—å') :
                                                h('div', { className: 'space-y-2' },
                                                    getCurrentRestaurantVacations().filter(vac => vac.employeeId === selectedEmployee.id).map(vacation =>
                                                        h('div', {
                                                            key: vacation.id,
                                                            className: `border rounded-lg p-3 ${
                                                                vacation.status === 'approved' ? 'border-green-200 bg-green-50' :
                                                                vacation.status === 'rejected' ? 'border-red-200 bg-red-50' :
                                                                'border-yellow-200 bg-yellow-50'
                                                            }`
                                                        },
                                                            h('div', { className: 'flex justify-between items-start' },
                                                                h('div', null,
                                                                    h('p', { className: 'font-medium text-gray-800' }, 
                                                                        vacation.type === 'annual' ? '–ï–∂–µ–≥–æ–¥–Ω—ã–π –æ—Ç–ø—É—Å–∫' :
                                                                        vacation.type === 'unpaid' ? '–û—Ç–ø—É—Å–∫ –∑–∞ —Å–≤–æ–π —Å—á–µ—Ç' :
                                                                        vacation.type === 'study' ? '–£—á–µ–±–Ω—ã–π –æ—Ç–ø—É—Å–∫' : '–î—Ä—É–≥–æ–π –æ—Ç–ø—É—Å–∫'
                                                                    ),
                                                                    h('p', { className: 'text-sm text-gray-600' }, 
                                                                        `${new Date(vacation.startDate).toLocaleDateString()} - ${new Date(vacation.endDate).toLocaleDateString()}`
                                                                    ),
                                                                    vacation.comment && h('p', { className: 'text-xs text-gray-500 mt-1' }, vacation.comment)
                                                                ),
                                                                h('span', {
                                                                    className: `px-2 py-1 text-xs font-medium rounded-full ${
                                                                        vacation.status === 'approved' ? 'bg-green-100 text-green-700' :
                                                                        vacation.status === 'rejected' ? 'bg-red-100 text-red-700' :
                                                                        'bg-yellow-100 text-yellow-700'
                                                                    }`
                                                                }, 
                                                                    vacation.status === 'approved' ? '–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω' :
                                                                    vacation.status === 'rejected' ? '–û—Ç–∫–ª–æ–Ω–µ–Ω' : '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏'
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                        ),
                                        
                                        employeeCardTab === 'payroll' && h('div', { className: 'space-y-4' },
                                            h('h4', { className: 'text-lg font-semibold text-gray-800' }, '–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã'),
                                            h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4' },
                                                h('div', { className: 'flex items-center space-x-2' },
                                                    h('span', { className: 'text-blue-600' }, 'üí∞'),
                                                    h('p', { className: 'text-sm text-blue-700' }, 
                                                        '–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤–∞—à–∏ —Ä–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞—Ä–ø–ª–∞—Ç–µ, –ø—Ä–µ–º–∏—è—Ö –∏ —à—Ç—Ä–∞—Ñ–∞—Ö'
                                                    )
                                                )
                                            ),
                                            getEmployeePayrollSlips(selectedEmployee.id).length === 0 ?
                                                h('p', { className: 'text-gray-500 text-center py-8' }, '–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã') :
                                                h('div', { className: 'space-y-3' },
                                                    getEmployeePayrollSlips(selectedEmployee.id).map(ps =>
                                                        h('div', {
                                                            key: ps.id,
                                                            className: 'bg-white border border-gray-200 rounded-lg p-4 shadow-sm'
                                                        },
                                                            h('div', null,
                                                                h('h5', { className: 'font-semibold text-gray-800 mb-3' }, 
                                                                    `–†–∞—Å—á–µ—Ç–Ω—ã–π –ª–∏—Å—Ç –∑–∞ ${new Date(ps.year, ps.month - 1).toLocaleDateString('ru', { month: 'long', year: 'numeric' })}`
                                                                ),
                                                                h('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4 mb-4' },
                                                                    h('div', null,
                                                                        h('p', { className: 'text-xs text-gray-500' }, '–ë–∞–∑–æ–≤–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞'),
                                                                        h('p', { className: 'font-medium text-gray-800' }, `${ps.baseSalary.toLocaleString()} —Ä—É–±.`)
                                                                    ),
                                                                    h('div', null,
                                                                        h('p', { className: 'text-xs text-gray-500' }, '–ü—Ä–µ–º–∏–∏'),
                                                                        h('p', { className: 'font-medium text-green-600' }, `+${ps.bonuses.toLocaleString()} —Ä—É–±.`)
                                                                    ),
                                                                    h('div', null,
                                                                        h('p', { className: 'text-xs text-gray-500' }, '–®—Ç—Ä–∞—Ñ—ã'),
                                                                        h('p', { className: 'font-medium text-red-600' }, `-${ps.penalties.toLocaleString()} —Ä—É–±.`)
                                                                    ),
                                                                    h('div', null,
                                                                        h('p', { className: 'text-xs text-gray-500' }, '–ò—Ç–æ–≥–æ –∫ –≤—ã–ø–ª–∞—Ç–µ'),
                                                                        h('p', { className: 'font-bold text-blue-600 text-lg' }, `${ps.totalAmount.toLocaleString()} —Ä—É–±.`)
                                                                    )
                                                                ),
                                                                
                                                                // –î–µ—Ç–∞–ª–∏ –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤
                                                                (ps.bonusesDetails && ps.bonusesDetails.length > 0) && h('div', { className: 'mb-3' },
                                                                    h('h6', { className: 'text-sm font-medium text-gray-700 mb-2' }, '–î–µ—Ç–∞–ª–∏ –ø—Ä–µ–º–∏–π:'),
                                                                    h('div', { className: 'space-y-1' },
                                                                        ps.bonusesDetails.map(bonus =>
                                                                            h('div', {
                                                                                key: bonus.id,
                                                                                className: 'flex justify-between items-center bg-green-50 border border-green-200 rounded p-2'
                                                                            },
                                                                                h('span', { className: 'text-sm text-green-700' }, bonus.reason),
                                                                                h('span', { className: 'text-sm font-medium text-green-800' }, `+${bonus.amount.toLocaleString()} —Ä—É–±.`)
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                
                                                                (ps.penaltiesDetails && ps.penaltiesDetails.length > 0) && h('div', { className: 'mb-3' },
                                                                    h('h6', { className: 'text-sm font-medium text-gray-700 mb-2' }, '–î–µ—Ç–∞–ª–∏ —à—Ç—Ä–∞—Ñ–æ–≤:'),
                                                                    h('div', { className: 'space-y-1' },
                                                                        ps.penaltiesDetails.map(penalty =>
                                                                            h('div', {
                                                                                key: penalty.id,
                                                                                className: 'flex justify-between items-center bg-red-50 border border-red-200 rounded p-2'
                                                                            },
                                                                                h('span', { className: 'text-sm text-red-700' }, penalty.reason),
                                                                                h('span', { className: 'text-sm font-medium text-red-800' }, `-${penalty.amount.toLocaleString()} —Ä—É–±.`)
                                                                            )
                                                                        )
                                                                    )
                                                                ),
                                                                
                                                                h('p', { className: 'text-xs text-gray-500 mt-2' }, 
                                                                    `–°–æ–∑–¥–∞–Ω: ${new Date(ps.createdAt).toLocaleDateString()} ‚Ä¢ ${ps.createdByName}`
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                        )
                                    ) :
                                    // –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                                    h('div', { className: 'space-y-4' },
                                        // –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                                        canManageEmployees && h('div', { className: 'flex justify-between items-center mb-4' },
                                            h('p', { className: 'text-gray-600' }, `–†–µ—Å—Ç–æ—Ä–∞–Ω: ${RESTAURANTS[selectedRestaurant].name}`),
                                            h('button', {
                                                onClick: () => setShowAddEmployee(!showAddEmployee),
                                                className: 'px-4 py-2 savva-bg-gold text-white rounded-lg hover:opacity-90 transition-opacity font-medium'
                                            }, showAddEmployee ? '‚ùå –ó–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É' : '‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞')
                                        ),
                                    
                                    // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                                    showAddEmployee && canManageEmployees && h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4' },
                                        h('h3', { className: 'text-lg font-semibold text-gray-800 mb-3' }, '–ù–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫'),
                                        h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-3' },
                                            // –§–ò–û
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–§–ò–û *'),
                                                h('input', {
                                                    type: 'text',
                                                    value: newEmployee.fullName,
                                                    onChange: (e) => setNewEmployee({...newEmployee, fullName: e.target.value}),
                                                    placeholder: '–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ',
                                                    className: 'savva-field w-full'
                                                })
                                            ),
                                            
                                            // –î–æ–ª–∂–Ω–æ—Å—Ç—å
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–î–æ–ª–∂–Ω–æ—Å—Ç—å *'),
                                                h('select', {
                                                    value: newEmployee.position,
                                                    onChange: (e) => setNewEmployee({...newEmployee, position: e.target.value}),
                                                    className: 'savva-field w-full'
                                                },
                                                    ...Object.keys(POSITIONS).map(pos =>
                                                        h('option', { key: pos, value: pos }, `${POSITIONS[pos].icon} ${pos}`)
                                                    )
                                                )
                                            ),
                                            
                                            // –û—Ç–¥–µ–ª
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–û—Ç–¥–µ–ª'),
                                                h('input', {
                                                    type: 'text',
                                                    value: newEmployee.department || '',
                                                    onChange: (e) => setNewEmployee({...newEmployee, department: e.target.value}),
                                                    placeholder: '–ö—É—Ö–Ω—è, –ó–∞–ª, –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è...',
                                                    className: 'savva-field w-full'
                                                })
                                            ),
                                            
                                            // –¢–µ–ª–µ—Ñ–æ–Ω
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–¢–µ–ª–µ—Ñ–æ–Ω'),
                                                h('input', {
                                                    type: 'tel',
                                                    value: newEmployee.phone || '',
                                                    onChange: (e) => setNewEmployee({...newEmployee, phone: e.target.value}),
                                                    placeholder: '+7 (999) 123-45-67',
                                                    className: 'savva-field w-full'
                                                })
                                            ),
                                            
                                            // Email
                                            h('div', { className: 'md:col-span-2' },
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Email'),
                                                h('input', {
                                                    type: 'email',
                                                    value: newEmployee.email || '',
                                                    onChange: (e) => setNewEmployee({...newEmployee, email: e.target.value}),
                                                    placeholder: 'employee@restaurant.com',
                                                    className: 'savva-field w-full'
                                                })
                                            ),
                                            
                                            // –ü–∞—Ä–æ–ª—å
                                            h('div', { className: 'md:col-span-2' },
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ü–∞—Ä–æ–ª—å'),
                                                h('input', {
                                                    type: 'password',
                                                    value: newEmployee.password || '111',
                                                    onChange: (e) => setNewEmployee({...newEmployee, password: e.target.value}),
                                                    placeholder: '–ü–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É',
                                                    className: 'savva-field w-full'
                                                }),
                                                h('p', { className: 'text-xs text-gray-500 mt-1' }, '–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 111 (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)')
                                            )
                                        ),
                                        
                                        // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
                                        h('div', { className: 'mt-4 flex justify-end space-x-3' },
                                            h('button', {
                                                onClick: () => {
                                                    setShowAddEmployee(false);
                setNewEmployee({
                    fullName: '',
                    position: '–°–æ—Ç—Ä—É–¥–Ω–∏–∫',
                    department: '',
                    phone: '',
                    email: '',
                    password: '111'
                });
                                                },
                                                className: 'px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors'
                                            }, '–û—Ç–º–µ–Ω–∞'),
                                            h('button', {
                                                onClick: handleAddEmployee,
                                                className: 'px-6 py-2 savva-button'
                                            }, '‚úÖ –î–æ–±–∞–≤–∏—Ç—å')
                                        )
                                    ),
                                    
                                    // –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                                    h('div', null,
                                        h('h4', { className: 'text-lg font-semibold text-gray-800 mb-3' }, 
                                            canViewAllEmployees() 
                                                ? `–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (${getCurrentRestaurantEmployees().length})`
                                                : '–ú–æ—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'
                                        ),
                                        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                                        !canViewAllEmployees() && h('div', { className: 'mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg' },
                                            h('div', { className: 'flex items-center space-x-2' },
                                                h('span', { className: 'text-blue-600' }, '‚ÑπÔ∏è'),
                                                h('p', { className: 'text-sm text-blue-700' }, '–í—ã –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ HR –∏–ª–∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É.')
                                            )
                                        ),
                                        
                                        getVisibleEmployees().length === 0 ?
                                            h('p', { className: 'text-gray-500 text-center py-4' }, '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è') :
                                            h('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3' },
                                                getVisibleEmployees().map((employee) =>
                                                    h('div', {
                                                        key: employee.id,
                                                        className: 'border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow'
                                                    },
                                                        h('div', { className: 'flex items-start justify-between mb-2' },
                                                            h('div', { className: 'flex items-center space-x-2' },
                                                                h('span', { className: 'text-xl' }, employee.icon),
                                                                h('div', null,
                                                                    h('p', { className: 'font-semibold text-gray-800 text-sm' }, employee.fullName),
                                                                    h('p', { className: 'text-xs text-gray-600' }, employee.position)
                                                                )
                                                            ),
                                                            // –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Ä–æ–ª–µ–π)
                                                            canManageEmployees && canViewAllEmployees() && employee.id !== `director_${selectedRestaurant}` && h('button', {
                                                                onClick: () => handleDeleteEmployee(employee.id, employee.fullName),
                                                                className: 'w-5 h-5 bg-red-500 text-white rounded-full hover:bg-red-600 flex items-center justify-center text-xs font-bold'
                                                            }, '√ó')
                                                        ),
                                                        h('div', { className: 'space-y-1 text-xs' },
                                                            employee.department && h('p', { className: 'text-gray-600' }, `–û—Ç–¥–µ–ª: ${employee.department}`),
                                                            employee.phone && h('p', { className: 'text-gray-600' }, `–¢–µ–ª: ${employee.phone}`),
                                                            employee.email && h('p', { className: 'text-gray-600' }, `Email: ${employee.email}`)
                                                        ),
                                                        h('div', { className: 'mt-2 flex flex-wrap gap-1' },
                                                            employee.permissions.map(perm =>
                                                                h('span', {
                                                                    key: perm,
                                                                    className: `px-1 py-0.5 text-xs font-medium rounded-full ${
                                                                        perm === 'all' ? 'bg-purple-100 text-purple-700' :
                                                                        perm === 'hrm' ? 'bg-blue-100 text-blue-700' :
                                                                        perm === 'warehouse' ? 'bg-green-100 text-green-700' :
                                                                        perm === 'reports' ? 'bg-yellow-100 text-yellow-700' :
                                                                        'bg-gray-100 text-gray-600'
                                                                    }`
                                                                }, perm.replace('_', ' ').toUpperCase())
                                                            )
                                                        ),
                                                        // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
                                                        h('div', { className: 'mt-2 flex flex-wrap gap-1' },
                                                            // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                                                            h('button', {
                                                                onClick: () => {
                                                                    setSelectedEmployee(employee);
                                                                    setEmployeeCardTab('personal');
                                                                },
                                                                className: 'px-2 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors'
                                                            }, 'üë§ –ü–æ–¥—Ä–æ–±–Ω–µ–µ'),
                                                            
                                                            // –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è HR)
                                                            currentUser.position === 'HR' && h('button', {
                                                                onClick: () => {
                                                                    setDocumentUploadData({...documentUploadData, employeeId: employee.id});
                                                                    setShowDocumentUpload(true);
                                                                },
                                                                className: 'px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors'
                                                            }, 'üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã')
                                                        )
                                                    )
                                                )
                                            )
                                    )
                                ) :
                                currentSection === 'vacations' ?
                                h('div', { className: 'space-y-4' },
                                    // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏
                                    // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫ (–Ω–µ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞)
                                    !currentUser.isDirector && h('div', { className: 'flex justify-between items-center mb-4' },
                                        h('p', { className: 'text-gray-600' }, `–†–µ—Å—Ç–æ—Ä–∞–Ω: ${RESTAURANTS[selectedRestaurant].name}`),
                                        h('button', {
                                            onClick: () => setShowVacationForm(!showVacationForm),
                                            className: 'px-4 py-2 savva-bg-gold text-white rounded-lg hover:opacity-90 transition-opacity font-medium'
                                        }, showVacationForm ? '‚ùå –ó–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É' : '‚ûï –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ç–ø—É—Å–∫')
                                    ),
                                    
                                    // –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏ (–Ω–µ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞)
                                    showVacationForm && !currentUser.isDirector && h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4' },
                                        h('h3', { className: 'text-lg font-semibold text-gray-800 mb-3' }, '–ó–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫'),
                                        
                                        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–Ω—è—Ö –¥–ª—è –µ–∂–µ–≥–æ–¥–Ω–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞
                                        vacationRequest.type === 'annual' && h('div', { className: 'mb-4 p-3 bg-green-50 border border-green-200 rounded-lg' },
                                            h('div', { className: 'flex items-center space-x-2' },
                                                h('span', { className: 'text-green-600' }, 'üìÖ'),
                                                h('p', { className: 'text-sm text-green-700' }, 
                                                    `–î–æ—Å—Ç—É–ø–Ω–æ –¥–Ω–µ–π –æ—Ç–ø—É—Å–∫–∞: ${getAvailableVacationDays(currentUser.id)}`
                                                )
                                            )
                                        ),
                                        
                                        h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-3' },
                                            // –¢–∏–ø –æ—Ç–ø—É—Å–∫–∞
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–¢–∏–ø –æ—Ç–ø—É—Å–∫–∞ *'),
                                                h('select', {
                                                    value: vacationRequest.type,
                                                    onChange: (e) => setVacationRequest({...vacationRequest, type: e.target.value}),
                                                    className: 'savva-field w-full'
                                                },
                                                    h('option', { value: 'annual' }, 'üå¥ –ï–∂–µ–≥–æ–¥–Ω—ã–π –æ–ø–ª–∞—á–∏–≤–∞–µ–º—ã–π'),
                                                    h('option', { value: 'unpaid' }, 'üíº –ó–∞ —Å–≤–æ–π —Å—á–µ—Ç'),
                                                    h('option', { value: 'study' }, 'üìö –£—á–µ–±–Ω—ã–π'),
                                                    h('option', { value: 'sick' }, 'üè• –ë–æ–ª—å–Ω–∏—á–Ω—ã–π')
                                                )
                                            ),
                                            
                                            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —É—á–µ–±–Ω–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞
                                            vacationRequest.type === 'study' && h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–£—á–µ–±–Ω–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ'),
                                                h('input', {
                                                    type: 'text',
                                                    placeholder: '–ù–∞–∑–≤–∞–Ω–∏–µ —É—á–µ–±–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è',
                                                    className: 'savva-field w-full'
                                                })
                                            ),
                                            
                                            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –±–æ–ª—å–Ω–∏—á–Ω–æ–≥–æ
                                            vacationRequest.type === 'sick' && h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ù–æ–º–µ—Ä –±–æ–ª—å–Ω–∏—á–Ω–æ–≥–æ –ª–∏—Å—Ç–∞'),
                                                h('input', {
                                                    type: 'text',
                                                    placeholder: '–ù–æ–º–µ—Ä –±–æ–ª—å–Ω–∏—á–Ω–æ–≥–æ –ª–∏—Å—Ç–∞',
                                                    className: 'savva-field w-full'
                                                })
                                            ),
                                            
                                            // –î–∞—Ç—ã
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ *'),
                                                h('input', {
                                                    type: 'date',
                                                    value: vacationRequest.startDate,
                                                    onChange: (e) => setVacationRequest({...vacationRequest, startDate: e.target.value}),
                                                    min: new Date().toISOString().split('T')[0],
                                                    className: 'savva-field w-full'
                                                }),
                                                vacationRequest.startDate && isHoliday(vacationRequest.startDate) && h('p', { className: 'text-xs text-orange-600 mt-1' }, '‚ö†Ô∏è –í—ã–±—Ä–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ - –ø—Ä–∞–∑–¥–Ω–∏–∫')
                                            ),
                                            
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è *'),
                                                h('input', {
                                                    type: 'date',
                                                    value: vacationRequest.endDate,
                                                    onChange: (e) => setVacationRequest({...vacationRequest, endDate: e.target.value}),
                                                    min: vacationRequest.startDate || new Date().toISOString().split('T')[0],
                                                    className: 'savva-field w-full'
                                                }),
                                                vacationRequest.endDate && isHoliday(vacationRequest.endDate) && h('p', { className: 'text-xs text-orange-600 mt-1' }, '‚ö†Ô∏è –í—ã–±—Ä–∞–Ω–Ω–∞—è –¥–∞—Ç–∞ - –ø—Ä–∞–∑–¥–Ω–∏–∫')
                                            ),
                                            
                                            // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                                            h('div', { className: 'md:col-span-2' },
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π'),
                                                h('textarea', {
                                                    value: vacationRequest.comment || '',
                                                    onChange: (e) => setVacationRequest({...vacationRequest, comment: e.target.value}),
                                                    placeholder: '–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é...',
                                                    rows: 3,
                                                    className: 'savva-field w-full'
                                                })
                                            )
                                        ),
                                        
                                        // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è—Ö
                                        vacationRequest.startDate && vacationRequest.endDate && 
                                        checkVacationOverlap(vacationRequest.startDate, vacationRequest.endDate, currentUser.id) && 
                                        h('div', { className: 'mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg' },
                                            h('div', { className: 'flex items-center space-x-2' },
                                                h('span', { className: 'text-yellow-600' }, '‚ö†Ô∏è'),
                                                h('p', { className: 'text-sm text-yellow-700' }, 
                                                    '–í—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å –æ—Ç–ø—É—Å–∫–∞–º–∏ –∫–æ–ª–ª–µ–≥. –ó–∞—è–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞.'
                                                )
                                            )
                                        ),
                                        
                                        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞—Ö –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ
                                        vacationRequest.startDate && vacationRequest.endDate && (() => {
                                            const holidaysInRange = [];
                                            const startDate = new Date(vacationRequest.startDate);
                                            const endDate = new Date(vacationRequest.endDate);
                                            const currentDate = new Date(startDate);
                                            
                                            while (currentDate <= endDate) {
                                                const dateStr = currentDate.toISOString().split('T')[0];
                                                if (isHoliday(dateStr)) {
                                                    const year = new Date(dateStr).getFullYear();
                                                    const holidays = getHolidaysForYear(year);
                                                    const holiday = holidays.find(h => h.date === dateStr);
                                                    holidaysInRange.push(holiday ? holiday.name : '–ü—Ä–∞–∑–¥–Ω–∏–∫');
                                                }
                                                currentDate.setDate(currentDate.getDate() + 1);
                                            }
                                            
                                            return holidaysInRange.length > 0 && h('div', { className: 'mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg' },
                                                h('div', { className: 'flex items-center space-x-2' },
                                                    h('span', { className: 'text-orange-600' }, 'üéâ'),
                                                    h('p', { className: 'text-sm text-orange-700' }, 
                                                        `–ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ: ${holidaysInRange.join(', ')}`
                                                    )
                                                )
                                            );
                                        })(),
                                        
                                        // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
                                        h('div', { className: 'mt-4 flex justify-end space-x-3' },
                                            h('button', {
                                                onClick: () => {
                                                    setShowVacationForm(false);
                                                    setVacationRequest({ 
                                                        type: 'annual',
                                                        startDate: '',
                                                        endDate: '',
                                                        comment: '',
                                                        employeeId: ''
                                                    });
                                                },
                                                className: 'px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors'
                                            }, '–û—Ç–º–µ–Ω–∞'),
                                            h('button', {
                                                onClick: handleVacationSubmit,
                                                className: 'px-6 py-2 savva-button'
                                            }, '‚úÖ –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É')
                                        )
                                    ),
                                    
                                    // –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ—Ç–ø—É—Å–∫
                                    h('div', null,
                                        h('h4', { className: 'text-lg font-semibold text-gray-800 mb-3' }, 
                                            `–ó–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫ (${getCurrentRestaurantVacations().length})`
                                        ),
                                        getCurrentRestaurantVacations().length === 0 ?
                                            h('p', { className: 'text-gray-500 text-center py-4' }, '–ù–µ—Ç –∑–∞—è–≤–æ–∫ –Ω–∞ –æ—Ç–ø—É—Å–∫') :
                                            h('div', { className: 'space-y-3' },
                                                getCurrentRestaurantVacations().map((vacation) =>
                                                    h('div', {
                                                        key: vacation.id,
                                                        className: `border rounded-lg p-3 ${
                                                            vacation.status === 'approved' ? 'bg-green-50 border-green-300' :
                                                            vacation.status === 'rejected' ? 'bg-red-50 border-red-300' :
                                                            'bg-gray-50 border-gray-300'
                                                        }`
                                                    },
                                                        h('div', { className: 'flex justify-between items-start mb-2' },
                                                            h('div', null,
                                                                h('p', { className: 'font-semibold text-gray-800' }, vacation.employeeName),
                                                                h('p', { className: 'text-sm text-gray-600' }, 
                                                                    vacation.type === 'annual' ? 'üå¥ –ï–∂–µ–≥–æ–¥–Ω—ã–π' :
                                                                    vacation.type === 'unpaid' ? 'üíº –ó–∞ —Å–≤–æ–π —Å—á–µ—Ç' :
                                                                    vacation.type === 'study' ? 'üìö –£—á–µ–±–Ω—ã–π' : 'üè• –ë–æ–ª—å–Ω–∏—á–Ω—ã–π'
                                                                )
                                                            ),
                                                            h('span', {
                                                                className: `px-2 py-1 text-xs font-medium rounded-full ${
                                                                    vacation.status === 'approved' ? 'bg-green-100 text-green-700' :
                                                                    vacation.status === 'rejected' ? 'bg-red-100 text-red-700' :
                                                                    'bg-yellow-100 text-yellow-700'
                                                                }`
                                                            }, vacation.status === 'approved' ? '‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ' :
                                                               vacation.status === 'rejected' ? '‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ' : '‚è≥ –ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏')
                                                        ),
                                                        h('div', { className: 'text-sm text-gray-700 mb-2' },
                                                            h('p', null, `üìÖ ${vacation.startDate} ‚Üí ${vacation.endDate}`),
                                                            vacation.comment && h('p', { className: 'mt-1' }, `üí¨ ${vacation.comment}`)
                                                        ),
                                                        vacation.status === 'pending' && canManageEmployees && h('div', { className: 'flex gap-2 mt-3' },
                                                            h('button', {
                                                                onClick: () => handleVacationApprove(vacation.id),
                                                                className: 'flex-1 px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 text-sm font-medium'
                                                            }, '‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å'),
                                                            h('button', {
                                                                onClick: () => handleVacationReject(vacation.id),
                                                                className: 'flex-1 px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 text-sm font-medium'
                                                            }, '‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å')
                                                        )
                                                    )
                                                )
                                            )
                                    )
                                ) :
                                currentSection === 'payroll' ?
                                // –†–∞–∑–¥–µ–ª "–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç–∫–∏" - —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
                                h('div', { className: 'space-y-6' },
                                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
                                    (() => {
                                        const canViewAllPayrolls = currentUser && ['–î–∏—Ä–µ–∫—Ç–æ—Ä', '–ú–µ–Ω–µ–¥–∂–µ—Ä', '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä'].includes(currentUser.position);
                                        const canViewOwnPayrolls = currentUser && !canViewAllPayrolls;
                                        
                                        if (!canViewAllPayrolls && !canViewOwnPayrolls) {
                                            return h('div', { className: 'text-center py-8' },
                                                h('p', { className: 'text-gray-500' }, '‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞—Å—á–µ—Ç–Ω—ã–º –ª–∏—Å—Ç–∞–º')
                                            );
                                        }
                                        
                                        return h('div', null,
                                            // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–∞–≤–∞—Ö
                                            h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4' },
                                                h('div', { className: 'flex items-center space-x-3' },
                                                    h('span', { className: 'text-2xl' }, 'üìä'),
                                                    h('div', null,
                                                        h('h3', { className: 'text-lg font-semibold text-blue-800' }, '–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã'),
                                                        h('p', { className: 'text-blue-700 text-sm' }, 
                                                            canViewAllPayrolls ? '–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ä–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã' : '–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ä–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã'
                                                        )
                                                    )
                                                )
                                            ),
                                            
                                            // –°–ø–∏—Å–æ–∫ —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤
                                            (() => {
                                                const payrollSlipsToShow = canViewAllPayrolls 
                                                    ? getCurrentRestaurantPayrollSlips()
                                                    : getCurrentRestaurantPayrollSlips().filter(ps => ps.employeeId === currentUser.id);
                                                
                                                if (payrollSlipsToShow.length === 0) {
                                                    return h('div', { className: 'text-center py-8' },
                                                        h('p', { className: 'text-gray-500' }, '–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã')
                                                    );
                                                }
                                                
                                                return h('div', { className: 'space-y-3' },
                                                    payrollSlipsToShow.map(ps => {
                                                        const employee = getCurrentRestaurantEmployees().find(emp => emp.id === ps.employeeId);
                                                        return h('div', {
                                                            key: ps.id,
                                                            className: 'bg-white border border-gray-200 rounded-lg p-4 shadow-sm'
                                                        },
                                                            h('div', { className: 'flex justify-between items-start mb-3' },
                                                                h('div', null,
                                                                    h('p', { className: 'font-semibold text-gray-800' }, 
                                                                        canViewAllPayrolls ? (employee ? employee.fullName : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫') : '–í–∞—à —Ä–∞—Å—á–µ—Ç–Ω—ã–π –ª–∏—Å—Ç'
                                                                    ),
                                                                    h('p', { className: 'text-sm text-gray-600' }, 
                                                                        `üìÖ ${new Date(ps.year, ps.month - 1).toLocaleDateString('ru', { month: 'long', year: 'numeric' })}`
                                                                    )
                                                                ),
                                                                h('span', {
                                                                    className: 'px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700'
                                                                }, '‚úÖ –°–æ–∑–¥–∞–Ω')
                                                            ),
                                                            h('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4 mb-3' },
                                                                h('div', null,
                                                                    h('p', { className: 'text-xs text-gray-500' }, '–ë–∞–∑–æ–≤–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞'),
                                                                    h('p', { className: 'font-medium text-gray-800' }, `${ps.baseSalary.toLocaleString()} —Ä—É–±.`)
                                                                ),
                                                                h('div', null,
                                                                    h('p', { className: 'text-xs text-gray-500' }, '–ü—Ä–µ–º–∏–∏'),
                                                                    h('p', { className: 'font-medium text-green-600' }, `+${ps.bonuses.toLocaleString()} —Ä—É–±.`)
                                                                ),
                                                                h('div', null,
                                                                    h('p', { className: 'text-xs text-gray-500' }, '–®—Ç—Ä–∞—Ñ—ã'),
                                                                    h('p', { className: 'font-medium text-red-600' }, `-${ps.penalties.toLocaleString()} —Ä—É–±.`)
                                                                ),
                                                                h('div', null,
                                                                    h('p', { className: 'text-xs text-gray-500' }, '–ò—Ç–æ–≥–æ –∫ –≤—ã–ø–ª–∞—Ç–µ'),
                                                                    h('p', { className: 'font-bold text-blue-600 text-lg' }, `${ps.totalAmount.toLocaleString()} —Ä—É–±.`)
                                                                )
                                                            ),
                                                            h('div', { className: 'flex space-x-2' },
                                                                h('button', {
                                                                    onClick: () => {
                                                                        alert('–§—É–Ω–∫—Ü–∏—è –ø–µ—á–∞—Ç–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ');
                                                                    },
                                                                    className: 'px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors'
                                                                }, 'üñ®Ô∏è –ü–µ—á–∞—Ç—å'),
                                                                h('button', {
                                                                    onClick: () => {
                                                                        alert('–§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è PDF –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ');
                                                                    },
                                                                    className: 'px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors'
                                                                }, 'üìÑ PDF')
                                                            )
                                                        );
                                                    })
                                                );
                                            })()
                                        );
                                    })()
                                ) :
                                currentSection === 'accounting' && canManagePayroll() ?
                                // –†–∞–∑–¥–µ–ª "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è" - –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞
                                h('div', { className: 'space-y-6' },
                                    // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
                                    h('div', { className: 'bg-green-50 border border-green-200 rounded-lg p-4' },
                                        h('div', { className: 'flex items-center space-x-3 mb-3' },
                                            h('span', { className: 'text-2xl' }, 'üí∞'),
                                            h('h3', { className: 'text-xl font-bold text-green-800' }, '–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞'),
                                            h('span', { className: 'px-2 py-1 bg-green-100 text-green-700 text-sm rounded-full' }, '–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ')
                                        ),
                                        h('p', { className: 'text-green-700' }, 
                                            '–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞—Ä–ø–ª–∞—Ç–æ–π, –ø—Ä–µ–º–∏—è–º–∏, —à—Ç—Ä–∞—Ñ–∞–º–∏ –∏ —Ä–∞—Å—á–µ—Ç–Ω—ã–º–∏ –ª–∏—Å—Ç–∞–º–∏ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ'
                                        )
                                    ),
                                    
                                    // –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                                    h('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4' },
                                        h('div', { className: 'bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow' },
                                            h('div', { className: 'flex items-center space-x-2 mb-2' },
                                                h('span', { className: 'text-2xl' }, 'üë•'),
                                                h('h4', { className: 'font-semibold text-gray-800' }, '–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏')
                                            ),
                                            h('p', { className: 'text-sm text-gray-600 mb-3' }, '–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞'),
                                            h('button', {
                                                onClick: () => setCurrentSection('employees'),
                                                className: 'w-full px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition-colors'
                                            }, '–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º')
                                        ),
                                        h('div', { className: 'bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow' },
                                            h('div', { className: 'flex items-center space-x-2 mb-2' },
                                                h('span', { className: 'text-2xl' }, 'üéÅ'),
                                                h('h4', { className: 'font-semibold text-gray-800' }, '–ü—Ä–µ–º–∏–∏ –∏ —à—Ç—Ä–∞—Ñ—ã')
                                            ),
                                            h('p', { className: 'text-sm text-gray-600 mb-3' }, '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–º–∏—è–º–∏ –∏ —à—Ç—Ä–∞—Ñ–∞–º–∏'),
                                            h('button', {
                                                onClick: () => setCurrentSection('payroll'),
                                                className: 'w-full px-3 py-2 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition-colors'
                                            }, '–£–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–µ–º–∏—è–º–∏')
                                        ),
                                        h('div', { className: 'bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow' },
                                            h('div', { className: 'flex items-center space-x-2 mb-2' },
                                                h('span', { className: 'text-2xl' }, 'üìä'),
                                                h('h4', { className: 'font-semibold text-gray-800' }, '–†–∞—Å—á–µ—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã')
                                            ),
                                            h('p', { className: 'text-sm text-gray-600 mb-3' }, '–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤'),
                                            h('button', {
                                                onClick: () => setCurrentSection('payroll'),
                                                className: 'w-full px-3 py-2 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 transition-colors'
                                            }, '–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–∏—Å—Ç—ã')
                                        )
                                    ),
                                    
                                    // –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤
                                    h('div', { className: 'bg-white border border-gray-200 rounded-lg p-6' },
                                        h('h4', { className: 'text-lg font-semibold text-gray-800 mb-4 flex items-center space-x-2' },
                                            h('span', null, '‚ö°'),
                                            h('span', null, '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤')
                                        ),
                                        h('p', { className: 'text-gray-600 mb-4' }, 
                                            '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ –ø–µ—Ä–∏–æ–¥ - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—á—Ç–µ—Ç –≤—Å–µ –ø—Ä–µ–º–∏–∏ –∏ —à—Ç—Ä–∞—Ñ—ã'
                                        ),
                                        
                                        // –§–æ—Ä–º–∞ –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ –ª–∏—Å—Ç–∞
                                        h('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4' },
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–°–æ—Ç—Ä—É–¥–Ω–∏–∫ *'),
                                                h('select', {
                                                    value: payrollData.employeeId,
                                                    onChange: (e) => setPayrollData({...payrollData, employeeId: e.target.value}),
                                                    className: 'savva-field w-full'
                                                },
                                                    h('option', { value: '' }, '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞'),
                                                    ...getCurrentRestaurantEmployees().map(emp =>
                                                        h('option', { 
                                                            key: emp.id, 
                                                            value: emp.id 
                                                        }, emp.fullName)
                                                    )
                                                )
                                            ),
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ú–µ—Å—è—Ü *'),
                                                h('select', {
                                                    value: payrollData.month,
                                                    onChange: (e) => setPayrollData({...payrollData, month: e.target.value}),
                                                    className: 'savva-field w-full'
                                                },
                                                    h('option', { value: '' }, '–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü'),
                                                    ...Array.from({length: 12}, (_, i) => 
                                                        h('option', { key: i+1, value: i+1 }, 
                                                            new Date(2024, i).toLocaleDateString('ru', { month: 'long' })
                                                        )
                                                    )
                                                )
                                            ),
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ì–æ–¥ *'),
                                                h('input', {
                                                    type: 'number',
                                                    value: payrollData.year,
                                                    onChange: (e) => setPayrollData({...payrollData, year: e.target.value}),
                                                    placeholder: '2024',
                                                    min: '2020',
                                                    max: '2030',
                                                    className: 'savva-field w-full'
                                                })
                                            ),
                                            h('div', null,
                                                h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ë–∞–∑–æ–≤–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞ *'),
                                                h('input', {
                                                    type: 'number',
                                                    value: payrollData.baseSalary,
                                                    onChange: (e) => setPayrollData({...payrollData, baseSalary: e.target.value}),
                                                    placeholder: '50000',
                                                    className: 'savva-field w-full'
                                                })
                                            )
                                        ),
                                        
                                        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤
                                        payrollData.employeeId && payrollData.month && payrollData.year && h('div', { className: 'mb-4' },
                                            h('div', { className: 'bg-blue-50 border border-blue-200 rounded-lg p-4' },
                                                h('h5', { className: 'font-semibold text-blue-800 mb-2' }, '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∑–∞ –ø–µ—Ä–∏–æ–¥:'),
                                                h('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4' },
                                                    h('div', null,
                                                        h('p', { className: 'text-sm text-blue-600' }, '–ü—Ä–µ–º–∏–∏:'),
                                                        h('p', { className: 'text-lg font-bold text-green-600' }, 
                                                            `+${getEmployeeBonusesPenaltiesForPeriod(payrollData.employeeId, parseInt(payrollData.month), parseInt(payrollData.year))
                                                                .filter(bp => bp.type === 'bonus')
                                                                .reduce((sum, bp) => sum + bp.amount, 0).toLocaleString()} —Ä—É–±.`
                                                        )
                                                    ),
                                                    h('div', null,
                                                        h('p', { className: 'text-sm text-blue-600' }, '–®—Ç—Ä–∞—Ñ—ã:'),
                                                        h('p', { className: 'text-lg font-bold text-red-600' }, 
                                                            `-${getEmployeeBonusesPenaltiesForPeriod(payrollData.employeeId, parseInt(payrollData.month), parseInt(payrollData.year))
                                                                .filter(bp => bp.type === 'penalty')
                                                                .reduce((sum, bp) => sum + bp.amount, 0).toLocaleString()} —Ä—É–±.`
                                                        )
                                                    ),
                                                    h('div', null,
                                                        h('p', { className: 'text-sm text-blue-600' }, '–ò—Ç–æ–≥–æ –∫ –≤—ã–ø–ª–∞—Ç–µ:'),
                                                        h('p', { className: 'text-lg font-bold text-blue-600' }, 
                                                            `${(parseFloat(payrollData.baseSalary) || 0 + 
                                                                getEmployeeBonusesPenaltiesForPeriod(payrollData.employeeId, parseInt(payrollData.month), parseInt(payrollData.year))
                                                                    .filter(bp => bp.type === 'bonus')
                                                                    .reduce((sum, bp) => sum + bp.amount, 0) -
                                                                getEmployeeBonusesPenaltiesForPeriod(payrollData.employeeId, parseInt(payrollData.month), parseInt(payrollData.year))
                                                                    .filter(bp => bp.type === 'penalty')
                                                                    .reduce((sum, bp) => sum + bp.amount, 0)).toLocaleString()} —Ä—É–±.`
                                                        )
                                                    )
                                                )
                                            )
                                        ),
                                        
                                        // –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
                                        h('div', { className: 'flex justify-end' },
                                            h('button', {
                                                onClick: handlePayrollSubmit,
                                                disabled: !payrollData.employeeId || !payrollData.month || !payrollData.year || !payrollData.baseSalary,
                                                className: `px-6 py-3 rounded-lg font-medium transition-colors ${
                                                    payrollData.employeeId && payrollData.month && payrollData.year && payrollData.baseSalary
                                                        ? 'savva-bg-gold text-white hover:opacity-90' 
                                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                                }`
                                            }, '‚ö° –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—á–µ—Ç–Ω—ã–π –ª–∏—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏')
                                        )
                                    ),
                                    
                                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                                    h('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4' },
                                        h('div', { className: 'bg-white border border-gray-200 rounded-lg p-4' },
                                            h('div', { className: 'flex items-center space-x-2 mb-2' },
                                                h('span', { className: 'text-2xl' }, 'üë•'),
                                                h('h5', { className: 'font-semibold text-gray-800' }, '–í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤')
                                            ),
                                            h('p', { className: 'text-2xl font-bold text-blue-600' }, getCurrentRestaurantEmployees().length)
                                        ),
                                        h('div', { className: 'bg-white border border-gray-200 rounded-lg p-4' },
                                            h('div', { className: 'flex items-center space-x-2 mb-2' },
                                                h('span', { className: 'text-2xl' }, 'üìä'),
                                                h('h5', { className: 'font-semibold text-gray-800' }, '–†–∞—Å—á–µ—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤')
                                            ),
                                            h('p', { className: 'text-2xl font-bold text-green-600' }, getCurrentRestaurantPayrollSlips().length)
                                        ),
                                        h('div', { className: 'bg-white border border-gray-200 rounded-lg p-4' },
                                            h('div', { className: 'flex items-center space-x-2 mb-2' },
                                                h('span', { className: 'text-2xl' }, 'üéÅ'),
                                                h('h5', { className: 'font-semibold text-gray-800' }, '–ü—Ä–µ–º–∏–π/—à—Ç—Ä–∞—Ñ–æ–≤')
                                            ),
                                            h('p', { className: 'text-2xl font-bold text-purple-600' }, getCurrentRestaurantBonusesPenalties().length)
                                        )
                                    )
                                ) :
                                currentSection === 'accounting' && !canManagePayroll() ?
                                h('div', { className: 'text-center py-8' },
                                    h('p', { className: 'text-gray-500' }, '‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª—É "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è"')
                                ) :
                                h('p', { className: 'text-gray-600' }, `–ú–æ–¥—É–ª—å HRM - —Ä–∞–∑–¥–µ–ª "${currentSection}"`)
                        )
                    ),
                    
                    currentModule === 'warehouse' && h('div', { className: 'space-y-6' },
                        h('div', { className: 'bg-white rounded-lg shadow p-4' },
                            h('div', { className: 'flex space-x-4 overflow-x-auto' },
                                ['inventory', 'movements', 'replenishment', 'rentals', 'issuances', 'writeoffs', 'reports'].map(section =>
                                    h('button', {
                                        key: section,
                                        onClick: () => setCurrentSection(section),
                                        className: `px-4 py-2 rounded-md font-medium transition-all whitespace-nowrap ${
                                            currentSection === section ? 'bg-green-100 text-green-700 border-2 border-green-300' : 'text-gray-600 hover:bg-gray-100'
                                        }`
                                    }, section === 'inventory' ? 'üì¶ –û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤' : 
                                      section === 'movements' ? 'üìä –î–≤–∏–∂–µ–Ω–∏—è' : 
                                      section === 'replenishment' ? 'üîÑ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ' :
                                      section === 'rentals' ? 'üöö –ê—Ä–µ–Ω–¥–∞' :
                                      section === 'issuances' ? 'üì§ –í—ã–¥–∞—á–∞' :
                                      section === 'writeoffs' ? 'üóëÔ∏è –°–ø–∏—Å–∞–Ω–∏–µ' : 'üìà –û—Ç—á–µ—Ç—ã')
                                )
                            )
                        ),
                        
                        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö —Å–æ —Å–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞—é—â–∏–º —Å—Ä–æ–∫–æ–º –≥–æ–¥–Ω–æ—Å—Ç–∏
                        currentSection === 'inventory' && checkExpiringProducts().length > 0 && h('div', { className: 'bg-yellow-50 border border-yellow-200 rounded-lg p-4' },
                            h('div', { className: 'flex items-start' },
                                h('div', { className: 'flex-shrink-0' },
                                    h('span', { className: 'text-2xl' }, '‚ö†Ô∏è')
                                ),
                                h('div', { className: 'ml-3 flex-1' },
                                    h('h3', { className: 'text-sm font-medium text-yellow-800' }, '–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Å—Ä–æ–∫–∞—Ö –≥–æ–¥–Ω–æ—Å—Ç–∏'),
                                    h('div', { className: 'mt-2 text-sm text-yellow-700' },
                                        h('p', {}, `–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ ${checkExpiringProducts().length} —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ —Å—Ä–æ–∫–æ–º –≥–æ–¥–Ω–æ—Å—Ç–∏ –º–µ–Ω–µ–µ 30 –¥–Ω–µ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ä–æ–∫—É –≥–æ–¥–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.`)
                                    ),
                                    h('button', {
                                        onClick: () => {
                                            const thirtyDaysFromNow = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
                                            setWarehouseFilter(prev => ({ ...prev, expiryDate: thirtyDaysFromNow }));
                                        },
                                        className: 'mt-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 text-sm font-medium'
                                    }, '–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–≤–∞—Ä—ã')
                                )
                            )
                        ),
                        
                        // –í–∫–ª–∞–¥–∫–∏ –ø–æ —Ç–∏–ø–∞–º —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ –≤ —Ä–∞–∑–¥–µ–ª–µ "–û—Å—Ç–∞—Ç–∫–∏")
                        currentSection === 'inventory' && h('div', { className: 'bg-white rounded-lg shadow p-4' },
                            h('div', { className: 'flex space-x-2 overflow-x-auto' },
                                ['all', 'products', 'inventory', 'tableware', 'alcohol'].map(tab =>
                                    h('button', {
                                        key: tab,
                                        onClick: () => {
                                            setWarehouseTab(tab);
                                            setWarehousePage(1);
                                        },
                                        className: `px-4 py-2 rounded-md font-medium transition-all whitespace-nowrap ${
                                            warehouseTab === tab ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`
                                    }, tab === 'all' ? 'üîç –í—Å–µ' :
                                      tab === 'products' ? 'üçñ –ü—Ä–æ–¥—É–∫—Ç—ã' :
                                      tab === 'inventory' ? 'ü™ë –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å' :
                                      tab === 'tableware' ? 'üçΩÔ∏è –ü–æ—Å—É–¥–∞' : 'üç∑ –ê–ª–∫–æ–≥–æ–ª—å')
                                )
                            )
                        ),
                        
                        // –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥—É–ª—è —Å–∫–ª–∞–¥–∞
                        currentSection === 'inventory' && h('div', { className: 'space-y-6' },
                            // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                            h('div', { className: 'bg-white rounded-lg shadow p-6' },
                                h('div', { className: 'flex justify-between items-center mb-6' },
                                    h('h2', { className: 'text-2xl font-bold text-gray-800' }, 'üì¶ –û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤'),
                                    h('div', { className: 'flex flex-wrap gap-2' },
                                        canManageWarehouse() && h('button', {
                                            onClick: () => setShowAddProduct(true),
                                            className: 'px-3 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors text-sm'
                                        }, '‚ûï –¢–æ–≤–∞—Ä'),
                                        canManageWarehouse() && h('button', {
                                            onClick: () => setShowIssuanceForm(true),
                                            className: 'px-3 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors text-sm'
                                        }, 'üì§ –í—ã–¥–∞—Ç—å'),
                                        canManageWarehouse() && warehouseTab === 'inventory' && h('button', {
                                            onClick: () => setShowRentalForm(true),
                                            className: 'px-3 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 transition-colors text-sm'
                                        }, 'üöö –ê—Ä–µ–Ω–¥–∞'),
                                        canManageWarehouse() && h('button', {
                                            onClick: () => setShowWriteOffForm(true),
                                            className: 'px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors text-sm'
                                        }, 'üóëÔ∏è –°–ø–∏—Å–∞—Ç—å'),
                                        h('button', {
                                            onClick: handleExportToExcel,
                                            className: 'px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors text-sm'
                                        }, 'üìä Excel')
                                    )
                                ),
                                
                                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                                h('div', { className: 'grid grid-cols-1 md:grid-cols-4 gap-4 mb-6' },
                                    h('div', { className: 'bg-blue-50 p-4 rounded-lg' },
                                        h('div', { className: 'text-2xl font-bold text-blue-600' }, getCurrentRestaurantWarehouseData().length.toLocaleString()),
                                        h('div', { className: 'text-sm text-gray-600' }, '–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤')
                                    ),
                                    h('div', { className: 'bg-green-50 p-4 rounded-lg' },
                                        h('div', { className: 'text-2xl font-bold text-green-600' }, getCurrentRestaurantWarehouseData().filter(p => p.quantity > p.minStock).length.toLocaleString()),
                                        h('div', { className: 'text-sm text-gray-600' }, '–í –Ω–∞–ª–∏—á–∏–∏')
                                    ),
                                    h('div', { className: 'bg-yellow-50 p-4 rounded-lg' },
                                        h('div', { className: 'text-2xl font-bold text-yellow-600' }, getCurrentRestaurantWarehouseData().filter(p => p.quantity <= p.minStock).length.toLocaleString()),
                                        h('div', { className: 'text-sm text-gray-600' }, '–ù–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫')
                                    ),
                                    h('div', { className: 'bg-red-50 p-4 rounded-lg' },
                                        h('div', { className: 'text-2xl font-bold text-red-600' }, getCurrentRestaurantWarehouseData().filter(p => p.quantity === 0).length.toLocaleString()),
                                        h('div', { className: 'text-sm text-gray-600' }, '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏')
                                    )
                                )
                            ),
                            
                            // –§–∏–ª—å—Ç—Ä—ã
                            h('div', { className: 'bg-white rounded-lg shadow p-6' },
                                h('h3', { className: 'text-lg font-semibold mb-4' }, 'üîç –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫'),
                                h('div', { className: 'grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4' },
                                    // –ü–æ–∏—Å–∫
                                    h('div', { className: 'md:col-span-2' },
                                        h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ü–æ–∏—Å–∫'),
                                        h('input', {
                                            type: 'text',
                                            placeholder: '–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, SKU, –ø–æ—Å—Ç–∞–≤—â–∏–∫—É...',
                                            value: warehouseFilter.search,
                                            onChange: (e) => setWarehouseFilter(prev => ({ ...prev, search: e.target.value })),
                                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500'
                                        })
                                    ),
                                    
                                    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                                    h('div', {},
                                        h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ö–∞—Ç–µ–≥–æ—Ä–∏—è'),
                                        h('select', {
                                            value: warehouseFilter.category,
                                            onChange: (e) => setWarehouseFilter(prev => ({ ...prev, category: e.target.value })),
                                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500'
                                        },
                                            h('option', { value: '' }, '–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'),
                                            getUniqueCategories().map(category => 
                                                h('option', { key: category, value: category }, category)
                                            )
                                        )
                                    ),
                                    
                                    // –ü–æ—Å—Ç–∞–≤—â–∏–∫
                                    h('div', {},
                                        h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ü–æ—Å—Ç–∞–≤—â–∏–∫'),
                                        h('select', {
                                            value: warehouseFilter.supplier,
                                            onChange: (e) => setWarehouseFilter(prev => ({ ...prev, supplier: e.target.value })),
                                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500'
                                        },
                                            h('option', { value: '' }, '–í—Å–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏'),
                                            getUniqueSuppliers().map(supplier => 
                                                h('option', { key: supplier, value: supplier }, supplier)
                                            )
                                        )
                                    ),
                                    
                                    // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
                                    h('div', {},
                                        h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ú–∏–Ω. –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ'),
                                        h('input', {
                                            type: 'number',
                                            placeholder: '0',
                                            value: warehouseFilter.minQuantity,
                                            onChange: (e) => setWarehouseFilter(prev => ({ ...prev, minQuantity: e.target.value })),
                                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500'
                                        })
                                    ),
                                    
                                    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
                                    h('div', {},
                                        h('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '–ú–∞–∫—Å. –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ'),
                                        h('input', {
                                            type: 'number',
                                            placeholder: '1000',
                                            value: warehouseFilter.maxQuantity,
                                            onChange: (e) => setWarehouseFilter(prev => ({ ...prev, maxQuantity: e.target.value })),
                                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500'
                                        })
                                    ),
                                    
                                    // –ß–µ–∫–±–æ–∫—Å –Ω–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫
                                    h('div', { className: 'flex items-end' },
                                        h('label', { className: 'flex items-center space-x-2' },
                                            h('input', {
                                                type: 'checkbox',
                                                checked: warehouseFilter.lowStock,
                                                onChange: (e) => setWarehouseFilter(prev => ({ ...prev, lowStock: e.target.checked })),
                                                className: 'rounded border-gray-300 text-green-600 focus:ring-green-500'
                                            }),
                                            h('span', { className: 'text-sm text-gray-700' }, '–ù–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫')
                                        )
                                    )
                                ),
                                
                                // –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
                                h('div', { className: 'mt-4' },
                                    h('button', {
                                        onClick: () => setWarehouseFilter({
                                            category: '',
                                            supplier: '',
                                            search: '',
                                            minQuantity: '',
                                            maxQuantity: '',
                                            expiryDate: '',
                                            lowStock: false
                                        }),
                                        className: 'px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors'
                                    }, 'üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã')
                                )
                            ),
                            
                            // –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
                            h('div', { className: 'bg-white rounded-lg shadow overflow-hidden' },
                                h('div', { className: 'px-6 py-4 border-b border-gray-200' },
                                    h('div', { className: 'flex justify-between items-center' },
                                        h('h3', { className: 'text-lg font-semibold' }, '–¢–æ–≤–∞—Ä—ã –Ω–∞ —Å–∫–ª–∞–¥–µ'),
                                        h('div', { className: 'text-sm text-gray-600' }, 
                                            `–ü–æ–∫–∞–∑–∞–Ω–æ: ${getPaginatedWarehouseData().data.length} –∏–∑ ${getPaginatedWarehouseData().total.toLocaleString()}`
                                        )
                                    )
                                ),
                                
                                // –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
                                h('div', { className: 'bg-gray-50 px-6 py-3 border-b border-gray-200' },
                                    h('div', { className: 'grid grid-cols-12 gap-4 text-sm font-medium text-gray-700' },
                                        h('div', { className: 'col-span-2' }, 'SKU'),
                                        h('div', { className: 'col-span-3' }, '–ù–∞–∑–≤–∞–Ω–∏–µ'),
                                        h('div', { className: 'col-span-2' }, '–ö–∞—Ç–µ–≥–æ—Ä–∏—è'),
                                        h('div', { className: 'col-span-2' }, '–ü–æ—Å—Ç–∞–≤—â–∏–∫'),
                                        h('div', { className: 'col-span-1' }, '–ö–æ–ª-–≤–æ'),
                                        h('div', { className: 'col-span-1' }, '–¶–µ–Ω–∞'),
                                        h('div', { className: 'col-span-1' }, '–°—Ç–∞—Ç—É—Å')
                                    )
                                ),
                                
                                // –í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤
                                h('div', { className: 'max-h-96 overflow-y-auto' },
                                    getPaginatedWarehouseData().data.map(product => 
                                        h('div', { 
                                            key: product.id,
                                            className: `px-6 py-3 border-b border-gray-100 hover:bg-gray-50 transition-colors ${
                                                product.quantity <= product.minStock ? 'bg-yellow-50' : ''
                                            }`
                                        },
                                            h('div', { className: 'grid grid-cols-12 gap-4 text-sm' },
                                                h('div', { className: 'col-span-2 font-mono text-xs' }, product.sku),
                                                h('div', { className: 'col-span-3 font-medium' }, product.name),
                                                h('div', { className: 'col-span-2 text-gray-600' }, product.category),
                                                h('div', { className: 'col-span-2 text-gray-600' }, product.supplier),
                                                h('div', { className: 'col-span-1 font-medium' }, `${product.quantity} ${product.unit}`),
                                                h('div', { className: 'col-span-1 text-gray-600' }, `${product.price} ‚ÇΩ`),
                                                h('div', { className: 'col-span-1' },
                                                    product.quantity === 0 ? 
                                                        h('span', { className: 'px-2 py-1 text-xs rounded-full bg-red-100 text-red-800' }, '–ù–µ—Ç') :
                                                    product.quantity <= product.minStock ?
                                                        h('span', { className: 'px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800' }, '–ú–∞–ª–æ') :
                                                        h('span', { className: 'px-2 py-1 text-xs rounded-full bg-green-100 text-green-800' }, '–û–ö')
                                                )
                                            )
                                        )
                                    )
                                ),
                                
                                // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
                                h('div', { className: 'px-6 py-4 border-t border-gray-200' },
                                    h('div', { className: 'flex justify-between items-center' },
                                        h('div', { className: 'flex space-x-2' },
                                            h('button', {
                                                onClick: () => setWarehousePage(Math.max(1, warehousePage - 1)),
                                                disabled: warehousePage === 1,
                                                className: `px-3 py-1 rounded-md text-sm ${
                                                    warehousePage === 1 ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'
                                                }`
                                            }, '‚Üê –ù–∞–∑–∞–¥'),
                                            h('span', { className: 'px-3 py-1 text-sm text-gray-600' }, 
                                                `–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${warehousePage} –∏–∑ ${getPaginatedWarehouseData().totalPages}`
                                            ),
                                            h('button', {
                                                onClick: () => setWarehousePage(Math.min(getPaginatedWarehouseData().totalPages, warehousePage + 1)),
                                                disabled: warehousePage === getPaginatedWarehouseData().totalPages,
                                                className: `px-3 py-1 rounded-md text-sm ${
                                                    warehousePage === getPaginatedWarehouseData().totalPages ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'
                                                }`
                                            }, '–í–ø–µ—Ä–µ–¥ ‚Üí')
                                        ),
                                        h('div', { className: 'flex items-center space-x-2' },
                                            h('span', { className: 'text-sm text-gray-600' }, '–ü–æ–∫–∞–∑–∞—Ç—å:'),
                                            h('select', {
                                                value: warehousePageSize,
                                                onChange: (e) => setWarehousePageSize(parseInt(e.target.value)),
                                                className: 'px-2 py-1 border border-gray-300 rounded text-sm'
                                            },
                                                h('option', { value: 25 }, '25'),
                                                h('option', { value: 50 }, '50'),
                                                h('option', { value: 100 }, '100'),
                                                h('option', { value: 200 }, '200')
                                            )
                                        )
                                    )
                                )
                            )
                        ),
                        
                        // –†–∞–∑–¥–µ–ª –¥–≤–∏–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤
                        currentSection === 'movements' && h('div', { className: 'bg-white rounded-lg shadow p-6' },
                            h('h2', { className: 'text-2xl font-bold mb-4' }, 'üìä –î–≤–∏–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤'),
                            h('p', { className: 'text-gray-600' }, '–ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ')
                        ),
                        
                        // –†–∞–∑–¥–µ–ª –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
                        currentSection === 'replenishment' && h('div', { className: 'bg-white rounded-lg shadow p-6' },
                            h('h2', { className: 'text-2xl font-bold mb-4' }, 'üîÑ –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ'),
                            h('p', { className: 'text-gray-600' }, '–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø–∞—Å–æ–≤')
                        ),
                        
                        // –†–∞–∑–¥–µ–ª –æ—Ç—á–µ—Ç–æ–≤
                        currentSection === 'reports' && h('div', { className: 'bg-white rounded-lg shadow p-6' },
                            h('h2', { className: 'text-2xl font-bold mb-4' }, 'üìà –û—Ç—á–µ—Ç—ã –ø–æ —Å–∫–ª–∞–¥—É'),
                            h('p', { className: 'text-gray-600' }, '–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã –ø–æ —Å–∫–ª–∞–¥—É')
                        )
                    ))
            );
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ App:', error);
                return h('div', {
                    className: 'min-h-screen bg-red-50 flex items-center justify-center p-4',
                    style: { color: 'red' }
                },
                    h('div', { className: 'text-center' },
                        h('h1', { className: 'text-2xl font-bold mb-4' }, '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'),
                        h('p', { className: 'mb-4' }, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã.'),
                        h('p', { className: 'text-sm' }, '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.'),
                        h('button', {
                            onClick: () => window.location.reload(),
                            className: 'mt-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600'
                        }, '–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É')
                    )
                );
            }
        }
        
        console.log('–ó–∞–ø—É—Å–∫ ERP —Å–∏—Å—Ç–µ–º—ã Novikov Group');
        console.log('React –¥–æ—Å—Ç—É–ø–µ–Ω:', typeof React !== 'undefined');
        console.log('ReactDOM –¥–æ—Å—Ç—É–ø–µ–Ω:', typeof ReactDOM !== 'undefined');
        
        const rootElement = document.getElementById('root');
        console.log('Root —ç–ª–µ–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω:', rootElement);
        
        if (rootElement && React && ReactDOM) {
            const root = ReactDOM.createRoot(rootElement);
            root.render(h(App));
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ');
        } else {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è');
            rootElement.innerHTML = '<div style="padding: 20px; color: red;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞.</div>';
        }
    </script>
</body>
</html> 
